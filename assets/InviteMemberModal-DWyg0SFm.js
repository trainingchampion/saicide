import{v as g,j as e,A as S,bq as C,bT as I,aO as w,cG as $}from"./vendor-react-tt7m-l12.js";const D=({isOpen:m,onClose:p,onInviteSent:i})=>{const[c,u]=g.useState(""),[b,h]=g.useState(!1),[t,y]=g.useState("");g.useEffect(()=>{m&&!t&&y(`https://sai.sh/project/${Math.random().toString(36).substring(7)}`)},[m,t]);const j=()=>{c.trim()&&c.includes("@")?(alert(`Invitation sent to ${c}`),u(""),i&&i(),p()):alert("Please enter a valid email address.")},N=()=>{navigator.clipboard.writeText(t),h(!0),setTimeout(()=>h(!1),2e3),i&&i()},f=s=>{const a=encodeURIComponent("SAI Collaboration Session"),r=encodeURIComponent(`Join me for a live coding session on SAI.

Project Link: ${t}`),o=encodeURIComponent(t),n=new Date,d=new Date(n.getTime()+60*60*1e3),x=`${n.toISOString().replace(/[-:]/g,"").split(".")[0]}Z/${d.toISOString().replace(/[-:]/g,"").split(".")[0]}Z`;switch(s){case"google":return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${a}&details=${r}&location=${o}&dates=${x}`;case"outlook":return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${a}&body=${r}&location=${o}&startdt=${n.toISOString()}&enddt=${d.toISOString()}`;case"yahoo":return`https://calendar.yahoo.com/?v=60&view=d&type=20&title=${a}&desc=${r}&in_loc=${o}&st=${x}`;default:return"#"}},v=()=>{const s="SAI Collaboration Session",a=`Join me for a live coding session on SAI.

Project Link: ${t}`,r=t,o=new Date,n=new Date(o.getTime()+60*60*1e3),d=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//SAI//Cloud IDE//EN
BEGIN:VEVENT
UID:${Date.now()}@sai.sh
DTSTAMP:${o.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
DTSTART:${o.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
DTEND:${n.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
SUMMARY:${s}
DESCRIPTION:${a}
LOCATION:${r}
END:VEVENT
END:VCALENDAR`,x=new Blob([d],{type:"text/calendar;charset=utf-8"}),k=URL.createObjectURL(x),l=document.createElement("a");l.href=k,l.setAttribute("download","sai-session.ics"),document.body.appendChild(l),l.click(),document.body.removeChild(l)};return m?e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",onClick:p,children:e.jsxs("div",{className:"bg-[#131b2c] rounded-2xl p-8 w-full max-w-md text-white border border-gray-700 shadow-xl",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Share Project & Invite"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300 block mb-2",children:"Share Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:t||"Generating link...",className:"flex-1 bg-gray-900/50 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-400"}),e.jsxs("button",{onClick:N,className:`px-3 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 transition-colors ${b?"bg-green-600/50 text-green-300":"bg-gray-700 hover:bg-gray-600"}`,children:[b?e.jsx(S,{size:16}):e.jsx(C,{size:16}),b?"Copied":"Copy"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 block mb-2 flex items-center gap-2",children:[e.jsx(I,{size:14})," Add to Calendar"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("a",{href:f("google"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700",children:"Google"}),e.jsx("a",{href:f("outlook"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700",children:"Outlook"}),e.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700 col-span-2",children:[e.jsx(w,{size:12})," Download .ics"]})]})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("hr",{className:"flex-1 border-gray-700"}),e.jsx("span",{className:"px-4 text-xs text-gray-500",children:"OR"}),e.jsx("hr",{className:"flex-1 border-gray-700"})]}),e.jsx("label",{className:"text-sm font-medium text-gray-300 block mb-2",children:"Invite by Email"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx($,{className:"absolute left-3 top-2.5 text-gray-500 w-4 h-4"}),e.jsx("input",{type:"email",value:c,onChange:s=>u(s.target.value),placeholder:"teammate@example.com",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg pl-9 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-sm font-semibold whitespace-nowrap",children:"Send Invite"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:p,className:"px-4 py-2 rounded-lg text-gray-400 hover:text-white text-sm",children:"Close"})})]})}):null};export{D as default};
