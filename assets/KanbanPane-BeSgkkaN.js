import{v as i,j as e,aX as te,bt as se,a_ as D,bS as re,a3 as le,bJ as ae,ah as ne,aq as T,bT as ie,M as oe,bU as de,X as L,bj as ce,al as xe}from"./vendor-react-tt7m-l12.js";const P=[{id:"todo",title:"To Do",color:"bg-gray-500"},{id:"in-progress",title:"In Progress",color:"bg-blue-500"},{id:"review",title:"Code Review",color:"bg-yellow-500"},{id:"done",title:"Done",color:"bg-green-500"}],U={Bug:"bg-red-500/20 text-red-300 border-red-500/30",Feature:"bg-blue-500/20 text-blue-300 border-blue-500/30",Refactor:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",Design:"bg-purple-500/20 text-purple-300 border-purple-500/30"},_=c=>{let x=[];return c.type==="file"&&c.content&&x.push(c.content),c.children&&c.children.forEach(n=>{x=x.concat(_(n))}),x},ue=({onCollapse:c,fileStructure:x,tasks:n,setTasks:h,projectName:X="Project",teamMembers:v=[]})=>{const[p,q]=i.useState(""),[u,S]=i.useState(null),[g,F]=i.useState(null),[w,m]=i.useState(null),[y,f]=i.useState(""),[z,A]=i.useState(""),[k,O]=i.useState("Feature"),[J,E]=i.useState(null),[K,N]=i.useState(null),[M,$]=i.useState(!1),[l,o]=i.useState(null);i.useEffect(()=>{n.length>0&&localStorage.setItem("sai_kanban_tasks",JSON.stringify(n))},[n]),i.useEffect(()=>{const t=localStorage.getItem("sai_kanban_tasks");if(t&&n.length===0)try{const r=JSON.parse(t);Array.isArray(r)&&r.length>0&&h(r)}catch{console.error("Failed to parse saved tasks")}},[]);const G=()=>{const t=_(x),r=[];t.forEach(a=>{a.split(`
`).forEach(d=>{const B=d.match(/(?:\/\/|#|\/\*)\s*TODO:?\s*(.+?)(?:\*\/)?$/i),I=d.match(/(?:\/\/|#|\/\*)\s*FIXME:?\s*(.+?)(?:\*\/)?$/i);if(B){const b=B[1].trim();n.some(C=>C.title===b)||r.push({id:"todo-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),title:b,tag:"Feature",status:"todo"})}if(I){const b=I[1].trim();n.some(C=>C.title===b)||r.push({id:"fixme-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),title:b,tag:"Bug",status:"todo"})}})}),r.length>0?(h(a=>[...a,...r]),alert("Found "+r.length+" new task(s) from code comments!")):alert("No new TODOs or FIXMEs found in code.")},Y=(t,r)=>{E(r),t.dataTransfer.setData("text/plain",r),t.dataTransfer.effectAllowed="move"},H=(t,r)=>{t.preventDefault(),t.dataTransfer.dropEffect="move",N(r)},Q=()=>{N(null)},V=(t,r)=>{t.preventDefault();const a=t.dataTransfer.getData("text/plain");a&&h(s=>s.map(d=>d.id===a?{...d,status:r}:d)),E(null),N(null)},R=t=>{if(!y.trim()){m(null);return}const r={id:"card-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),title:y,description:z||void 0,status:t,tag:k};h(a=>[...a,r]),f(""),A(""),O("Feature"),m(null)},W=t=>{confirm("Delete this task?")&&(h(r=>r.filter(a=>a.id!==t)),o(null))},Z=t=>{h(r=>r.map(a=>a.id===t.id?t:a)),o(null)},ee=i.useMemo(()=>n.filter(t=>{var d;const r=t.title.toLowerCase().includes(p.toLowerCase())||((d=t.description)==null?void 0:d.toLowerCase().includes(p.toLowerCase())),a=!u||t.tag===u,s=!g||t.assignee===g;return r&&a&&s}),[n,p,u,g]),j=i.useMemo(()=>({total:n.length,todo:n.filter(t=>t.status==="todo").length,inProgress:n.filter(t=>t.status==="in-progress").length,review:n.filter(t=>t.status==="review").length,done:n.filter(t=>t.status==="done").length}),[n]);return e.jsxs("div",{className:"h-full flex flex-col bg-[#0b0e14] text-white font-sans overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-[#161b22] flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(te,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-blue-500 to-cyan-500 text-white rounded-xl shadow-lg",children:e.jsx(se,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Project Board"}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:X})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(D,{size:12,className:"text-gray-500"}),e.jsxs("span",{children:[j.todo," To Do"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(D,{size:12,className:"text-blue-500 fill-blue-500"}),e.jsxs("span",{children:[j.inProgress," In Progress"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(D,{size:12,className:"text-yellow-500 fill-yellow-500"}),e.jsxs("span",{children:[j.review," Review"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(re,{size:12,className:"text-green-500"}),e.jsxs("span",{children:[j.done," Done"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search tasks...",value:p,onChange:t=>q(t.target.value),className:"w-56 bg-[#0d1117] border border-white/10 rounded-lg py-2 pl-9 pr-3 text-sm focus:outline-none focus:border-blue-500 transition-colors"}),e.jsx(le,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>$(!M),className:"p-2 rounded-lg transition-colors border "+(u||g?"bg-blue-500/20 border-blue-500/50 text-blue-400":"bg-white/5 border-white/10 text-gray-400 hover:text-white hover:bg-white/10"),title:"Filter",children:e.jsx(ae,{size:18})}),M&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#1c2128] border border-white/10 rounded-xl shadow-2xl z-50 p-4",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 mb-3",children:"FILTER BY"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Tag"}),e.jsxs("select",{value:u||"",onChange:t=>S(t.target.value||null),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white",children:[e.jsx("option",{value:"",children:"All Tags"}),e.jsx("option",{value:"Bug",children:"Bug"}),e.jsx("option",{value:"Feature",children:"Feature"}),e.jsx("option",{value:"Refactor",children:"Refactor"}),e.jsx("option",{value:"Design",children:"Design"})]})]}),v.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Assignee"}),e.jsxs("select",{value:g||"",onChange:t=>F(t.target.value||null),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white",children:[e.jsx("option",{value:"",children:"All Members"}),v.map(t=>e.jsx("option",{value:t.initials,children:t.name},t.id))]})]}),(u||g)&&e.jsx("button",{onClick:()=>{S(null),F(null)},className:"w-full py-2 text-sm text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:"Clear Filters"})]})]})]}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white px-3 py-2 rounded-lg transition-colors text-sm font-medium",title:"Scan Code for TODOs",children:[e.jsx(ne,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Scan Code"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden p-6",children:e.jsxs("div",{className:"flex gap-5 h-full items-start min-w-max",children:[P.map(t=>{const r=ee.filter(s=>s.status===t.id),a=K===t.id;return e.jsxs("div",{className:"flex-shrink-0 w-80 bg-[#161b22] rounded-2xl border transition-all flex flex-col max-h-full "+(a?"border-blue-500 shadow-lg shadow-blue-500/20":"border-white/5"),onDragOver:s=>H(s,t.id),onDragLeave:Q,onDrop:s=>V(s,t.id),children:[e.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+t.color}),e.jsx("h3",{className:"text-sm font-bold text-gray-200",children:t.title}),e.jsx("span",{className:"text-xs bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:r.length})]}),e.jsx("button",{onClick:()=>{m(t.id),f("")},className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-500 hover:text-white transition-colors",children:e.jsx(T,{size:16})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 custom-scrollbar",children:[r.map(s=>e.jsxs("div",{draggable:!0,onDragStart:d=>Y(d,s.id),onClick:()=>o(s),className:"bg-[#21262d] p-4 rounded-xl border border-white/5 hover:border-gray-500 cursor-pointer shadow-sm group relative transition-all "+(J===s.id?"opacity-50 rotate-2 scale-105":"opacity-100 hover:shadow-md"),children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsx("span",{className:"text-[10px] px-2 py-1 rounded-md font-bold uppercase tracking-wider border "+(U[s.tag]||"bg-gray-700 text-gray-300 border-gray-600"),children:s.tag})}),e.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.dueDate&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] px-2 py-1 rounded-md "+(s.status==="done"?"bg-green-500/10 text-green-400":new Date(s.dueDate)<new Date?"bg-red-500/10 text-red-400":"bg-gray-500/10 text-gray-400"),children:[e.jsx(ie,{size:10}),e.jsx("span",{children:new Date(s.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),s.commentsCount&&s.commentsCount>0&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsx(oe,{size:10})," ",s.commentsCount]})]}),s.assignee?e.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-[10px] font-bold text-white shadow-sm",title:"Assigned to "+s.assignee,children:s.assignee}):e.jsx("div",{className:"w-7 h-7 rounded-full bg-[#30363d] flex items-center justify-center text-gray-500 border border-dashed border-gray-600 hover:bg-white/10 transition-colors",children:e.jsx(de,{size:14})})]})]},s.id)),w===t.id&&e.jsxs("div",{className:"bg-[#21262d] p-4 rounded-xl border-2 border-blue-500 shadow-lg shadow-blue-500/10 animate-fade-in",children:[e.jsx("input",{autoFocus:!0,type:"text",value:y,onChange:s=>f(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey?(s.preventDefault(),R(t.id)):s.key==="Escape"&&m(null)},placeholder:"Task title...",className:"w-full bg-transparent text-sm text-white placeholder-gray-500 outline-none font-medium mb-2"}),e.jsx("textarea",{value:z,onChange:s=>A(s.target.value),placeholder:"Description (optional)",className:"w-full bg-transparent text-xs text-gray-400 placeholder-gray-600 resize-none outline-none min-h-[40px] mb-3"}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("select",{value:k,onChange:s=>O(s.target.value),className:"bg-[#0d1117] border border-white/10 rounded-lg py-1.5 px-2 text-xs text-white",children:[e.jsx("option",{value:"Feature",children:"Feature"}),e.jsx("option",{value:"Bug",children:"Bug"}),e.jsx("option",{value:"Refactor",children:"Refactor"}),e.jsx("option",{value:"Design",children:"Design"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(t.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-colors",children:"Add Task"}),e.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white",children:e.jsx(L,{size:16})})]})]}),r.length===0&&w!==t.id&&e.jsxs("div",{className:"text-center py-8 text-gray-600",children:[e.jsx(ce,{size:24,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"No tasks yet"})]})]}),w!==t.id&&e.jsx("div",{className:"p-3 border-t border-white/5",children:e.jsxs("button",{onClick:()=>{m(t.id),f("")},className:"w-full flex items-center justify-center gap-2 py-2.5 rounded-xl text-gray-500 hover:bg-white/5 hover:text-gray-300 text-sm transition-colors font-medium",children:[e.jsx(T,{size:16})," Add Task"]})})]},t.id)}),e.jsxs("div",{className:"flex-shrink-0 w-80 h-16 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/5 border-dashed flex items-center justify-center text-sm font-bold text-gray-500 cursor-pointer transition-colors hover:border-gray-500",children:[e.jsx(T,{size:16,className:"mr-2"})," Add Column"]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] flex items-center justify-center p-4",onClick:()=>o(null),children:e.jsx("div",{className:"bg-[#1c2128] border border-white/10 rounded-2xl shadow-2xl w-full max-w-lg",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-md font-bold uppercase tracking-wider border "+U[l.tag],children:l.tag}),e.jsx("button",{onClick:()=>o(null),className:"p-1 hover:bg-white/10 rounded-lg text-gray-500 hover:text-white",children:e.jsx(L,{size:18})})]}),e.jsx("input",{type:"text",value:l.title,onChange:t=>o({...l,title:t.target.value}),className:"w-full text-xl font-bold text-white bg-transparent outline-none mb-4"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Description"}),e.jsx("textarea",{value:l.description||"",onChange:t=>o({...l,description:t.target.value}),placeholder:"Add a description...",className:"w-full bg-[#0d1117] border border-white/10 rounded-lg p-3 text-sm text-gray-300 placeholder-gray-600 resize-none min-h-[100px] outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Status"}),e.jsx("select",{value:l.status,onChange:t=>o({...l,status:t.target.value}),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white",children:P.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Tag"}),e.jsxs("select",{value:l.tag,onChange:t=>o({...l,tag:t.target.value}),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white",children:[e.jsx("option",{value:"Feature",children:"Feature"}),e.jsx("option",{value:"Bug",children:"Bug"}),e.jsx("option",{value:"Refactor",children:"Refactor"}),e.jsx("option",{value:"Design",children:"Design"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Due Date"}),e.jsx("input",{type:"date",value:l.dueDate||"",onChange:t=>o({...l,dueDate:t.target.value}),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Assignee"}),e.jsxs("select",{value:l.assignee||"",onChange:t=>o({...l,assignee:t.target.value||void 0}),className:"w-full bg-[#0d1117] border border-white/10 rounded-lg py-2 px-3 text-sm text-white",children:[e.jsx("option",{value:"",children:"Unassigned"}),v.map(t=>e.jsx("option",{value:t.initials,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>W(l.id),className:"flex items-center gap-2 px-4 py-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm",children:[e.jsx(xe,{size:16}),"Delete"]}),e.jsx("button",{onClick:()=>Z(l),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-colors text-sm",children:"Save Changes"})]})]})})})]})};export{ue as default};
