import{v as s,j as e,M as L,X as E,cu as X,a1 as T,ax as W,G as Y,bW as I,a3 as A}from"./vendor-react-tt7m-l12.js";const G=b=>{const[i,d]=s.useState(b),[p,u]=s.useState(!1),x=s.useRef({x:0,y:0}),g=n=>{if(n.target.closest("button, input, select, textarea"))return;u(!0);const a=Math.max(0,Math.min(i.x,window.innerWidth-50)),o=Math.max(0,Math.min(i.y,window.innerHeight-50));d({x:a,y:o}),x.current={x:n.clientX-a,y:n.clientY-o}};return s.useEffect(()=>{const n=o=>{if(p){const f=Math.max(0,Math.min(o.clientX-x.current.x,window.innerWidth-50)),w=Math.max(0,Math.min(o.clientY-x.current.y,window.innerHeight-50));d({x:f,y:w})}},a=()=>u(!1);return window.addEventListener("mousemove",n),window.addEventListener("mouseup",a),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",a)}},[p,i]),{pos:i,handleMouseDown:g}},P=({isOpen:b,onClose:i,currentUser:d,teamMembers:p,isMinimized:u,onMinimize:x,onMaximize:g,hasUnread:n,messages:a,onSendMessage:o,activity:f,discussions:w})=>{const[r,v]=s.useState("chat"),[h,j]=s.useState(""),[m,N]=s.useState(""),M=s.useRef(null),{pos:l,handleMouseDown:S}=G({x:window.innerWidth-420,y:100}),[k,D]=s.useState({width:400,height:600}),y=s.useRef(!1);s.useEffect(()=>{N("")},[r]);const $=t=>{t.preventDefault(),y.current=!0};s.useEffect(()=>{const t=C=>{y.current&&D(F=>({width:Math.max(300,C.clientX-l.x),height:Math.max(400,C.clientY-l.y)}))},c=()=>y.current=!1;return window.addEventListener("mousemove",t),window.addEventListener("mouseup",c),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",c)}},[l.x,l.y]),s.useEffect(()=>{var t;(t=M.current)==null||t.scrollIntoView({behavior:"smooth"})},[a]);const z=()=>{h.trim()&&(o(h),j(""))},R=f.filter(t=>t.text.toLowerCase().includes(m.toLowerCase())),H=w.filter(t=>t.title.toLowerCase().includes(m.toLowerCase())||t.user.toLowerCase().includes(m.toLowerCase()));return b?u?e.jsxs("div",{className:"fixed z-[200] group right-0 bottom-24 flex items-end",children:[e.jsxs("button",{onClick:g,className:"w-16 h-16 bg-[#131b2c]/90 backdrop-blur-md border border-gray-700/50 rounded-l-full flex items-center justify-center text-white shadow-2xl hover:border-cyan-500 transition-all",title:"Open Session Hub",children:[e.jsx(L,{size:24}),n&&e.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full border-2 border-[#131b2c]"})]}),e.jsx("button",{onClick:i,className:"absolute -top-1 right-2 bg-gray-800 rounded-full p-1 text-gray-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",title:"Close Chat",children:e.jsx(E,{size:12})})]}):e.jsxs("div",{className:"fixed bg-[#131b2c] border border-gray-700 rounded-2xl shadow-2xl z-[200] flex flex-col overflow-hidden animate-fade-in",style:{left:l.x,top:l.y,width:k.width,height:k.height},children:[e.jsxs("div",{className:"p-3 border-b border-gray-700 flex justify-between items-center bg-[#0b101b] cursor-move select-none",onMouseDown:S,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{size:14,className:"text-gray-500"}),e.jsx("h3",{className:"font-bold text-white text-sm",children:"Session Hub"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-white p-1 rounded-md hover:bg-white/10",title:"Minimize",children:e.jsx(T,{size:16})}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-white p-1 rounded-md hover:bg-white/10",title:"Close",children:e.jsx(E,{size:16})})]})]}),e.jsxs("div",{className:"flex border-b border-gray-700 bg-[#0f1522]",children:[e.jsxs("button",{onClick:()=>v("chat"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest ${r==="chat"?"text-white bg-[#131b2c]":"text-gray-500 hover:text-white"}`,children:[e.jsx(L,{size:12})," Chat"]}),e.jsxs("button",{onClick:()=>v("pulse"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest ${r==="pulse"?"text-white bg-[#131b2c]":"text-gray-500 hover:text-white"}`,children:[e.jsx(W,{size:12})," Pulse"]}),e.jsxs("button",{onClick:()=>v("hub"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest ${r==="hub"?"text-white bg-[#131b2c]":"text-gray-500 hover:text-white"}`,children:[e.jsx(Y,{size:12})," Hub"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-[#0f1522]",children:[r==="chat"&&a.map((t,c)=>e.jsxs("div",{className:`flex flex-col ${t.user===d.name?"items-end":"items-start"}`,children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-300",children:t.user}),e.jsx("span",{className:"text-[10px] text-gray-500",children:t.time})]}),e.jsx("div",{className:`px-3 py-2 rounded-lg text-sm max-w-[85%] ${t.user===d.name?"bg-[var(--color-accent)] text-white rounded-tr-none":"bg-gray-700 text-gray-200 rounded-tl-none"}`,children:t.text})]},c)),r==="pulse"&&R.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-2 text-xs text-gray-300",children:[t.icon,e.jsx("span",{className:"flex-1 text-gray-400",children:t.text}),e.jsx("span",{className:"text-gray-500",children:t.time})]},t.id)),r==="hub"&&e.jsx("div",{className:"space-y-4",children:H.map((t,c)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-black/20 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold",children:t.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-xs text-gray-200 hover:text-[var(--color-accent)] cursor-pointer",children:t.title}),e.jsxs("p",{className:"text-[10px] text-gray-500",children:["by @",t.user," â€¢ ",t.time]})]})]},`${t.title}-${c}`))}),e.jsx("div",{ref:M})]}),r==="chat"&&e.jsx("div",{className:"p-3 bg-[#131b2c] border-t border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:t=>j(t.target.value),onKeyDown:t=>t.key==="Enter"&&z(),placeholder:"Type a message...",className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-[var(--color-accent)]"}),e.jsx("button",{onClick:z,disabled:!h.trim(),className:"p-2 bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white rounded-lg disabled:opacity-50 transition-colors",children:e.jsx(I,{size:18})})]})}),(r==="pulse"||r==="hub")&&e.jsx("div",{className:"p-3 bg-[#131b2c] border-t border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",value:m,onChange:t=>N(t.target.value),placeholder:`Filter ${r}...`,className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-9 pr-3 py-2 text-sm text-white focus:outline-none focus:border-[var(--color-accent)]"})]})}),e.jsx("div",{onMouseDown:$,className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50 flex items-center justify-center opacity-50 hover:opacity-100",children:e.jsxs("svg",{viewBox:"0 0 24 24",width:"12",height:"12",stroke:"white",strokeWidth:"2",fill:"none",children:[e.jsx("path",{d:"M16 16l6 6",strokeLinecap:"round"}),e.jsx("path",{d:"M12 20l8-8",strokeLinecap:"round",strokeOpacity:"0.5"})]})})]}):null};export{P as default};
