import{v as s,j as e,aR as R,aQ as q,G as L}from"./vendor-react-tt7m-l12.js";import{e as c}from"./index.dev-DC3GzjrE.js";import"./vendor-mcp-DCT6vnr2.js";import"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const b="797126800237-grqqj0pj267rhat5cb6nk538h6k6s8hc.apps.googleusercontent.com",T=({isOpen:i,onClose:u,onAuthSuccess:h})=>{const[n,j]=s.useState("signin"),[p,w]=s.useState(""),[a,v]=s.useState(""),[x,N]=s.useState(!1),[f,S]=s.useState(""),[k,l]=s.useState(""),[m,d]=s.useState(!1),[y,A]=s.useState(!1),C=s.useRef(null),I=s.useCallback(async t=>{l(""),d(!0);try{const r=await c.signInWithGoogleCredential(t.credential);h(r),u()}catch(r){l(r.message||"An unexpected error occurred during Google Sign-In.")}finally{d(!1)}},[h,u]);s.useEffect(()=>{var r,G;if(!i||!b)return;const t=()=>{var o,g;typeof window<"u"&&((g=(o=window.google)==null?void 0:o.accounts)!=null&&g.id)&&(c.initializeGoogleSignIn(b,I),A(!0))};if((G=(r=window.google)==null?void 0:r.accounts)!=null&&G.id)t();else{const o=setInterval(()=>{var g,E;(E=(g=window.google)==null?void 0:g.accounts)!=null&&E.id&&(clearInterval(o),t())},100);return setTimeout(()=>clearInterval(o),5e3),()=>clearInterval(o)}},[i,I]),s.useEffect(()=>{y&&C.current&&b&&c.renderGoogleButton("google-signin-button",{theme:"filled_black",size:"large",text:"continue_with",width:320})},[y,i]),s.useEffect(()=>{i||setTimeout(()=>{j("signin"),w(""),v(""),N(!1),S(""),l(""),d(!1)},300)},[i]);const z=async t=>{t.preventDefault(),l(""),d(!0);try{let r;if(n==="signup"){if(!f.trim())throw new Error("Name is required.");r=await c.signUp(f,p,a)}else r=await c.signIn(p,a);h(r),u()}catch(r){l(r.message||"An unexpected error occurred.")}finally{d(!1)}};return i?e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[200] animate-fade-in",onClick:u,children:e.jsxs("div",{className:"bg-[#131b2c] rounded-2xl p-8 w-full max-w-md text-white border border-gray-700 shadow-xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-auto px-4 h-12 bg-[var(--color-background)] rounded-lg mb-4 border border-[var(--color-border)] whitespace-nowrap",children:e.jsx("span",{className:"font-michroma text-2xl font-semibold text-[var(--color-success)] tracking-tighter",children:"Sai IDE"})}),e.jsx("h2",{className:"text-2xl font-bold",children:n==="signin"?"Welcome Back":"Create an Account"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:n==="signin"?"Sign in to access your Sai projects.":"Code, collaborate, and create faster with AI."})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[n==="signup"&&e.jsx("input",{type:"text",value:f,onChange:t=>S(t.target.value),placeholder:"Full Name",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsx("input",{type:"email",value:p,onChange:t=>w(t.target.value),placeholder:"Email Address",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:a,onChange:t=>v(t.target.value),placeholder:"Password",className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 pr-11 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),e.jsx("button",{type:"button",onClick:()=>N(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",title:x?"Hide password":"Show password",children:x?e.jsx(R,{size:18}):e.jsx(q,{size:18})})]}),n==="signup"&&a.length>0&&e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:`flex items-center gap-2 ${a.length>=6?"text-green-400":"text-gray-500"}`,children:[e.jsx("span",{children:a.length>=6?"✓":"○"}),e.jsx("span",{children:"At least 6 characters"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${/[A-Z]/.test(a)?"text-green-400":"text-gray-500"}`,children:[e.jsx("span",{children:/[A-Z]/.test(a)?"✓":"○"}),e.jsx("span",{children:"One uppercase letter"})]}),e.jsxs("div",{className:`flex items-center gap-2 ${/[0-9]/.test(a)?"text-green-400":"text-gray-500"}`,children:[e.jsx("span",{children:/[0-9]/.test(a)?"✓":"○"}),e.jsx("span",{children:"One number"})]})]}),k&&e.jsx("p",{className:"text-red-400 text-sm text-center",children:k}),e.jsxs("button",{type:"submit",disabled:m,className:"w-full px-4 py-3 rounded-lg bg-green-500 hover:bg-green-600 text-gray-900 text-sm font-bold disabled:bg-gray-600 disabled:cursor-wait flex items-center justify-center",children:[m&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m?"Processing...":n==="signin"?"Sign In":"Sign Up"]})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("hr",{className:"flex-1 border-gray-700"}),e.jsx("span",{className:"px-4 text-xs text-gray-500",children:"OR"}),e.jsx("hr",{className:"flex-1 border-gray-700"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{id:"google-signin-button",ref:C,className:"min-h-[44px] flex items-center justify-center",children:!y&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-3 px-4 py-3 rounded-lg bg-gray-900/50 border border-gray-700 text-sm text-gray-400",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading Google Sign-In..."]})})}),e.jsxs("button",{type:"button",onClick:()=>{c.initiateGitHubOAuth()},disabled:m,className:"w-full flex items-center justify-center gap-3 px-4 py-3 mt-3 rounded-lg bg-gray-900/50 border border-gray-700 hover:bg-gray-700/50 text-sm font-medium disabled:opacity-50 transition-colors",children:[e.jsx(L,{size:20}),"Continue with GitHub"]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:[n==="signin"?"Don't have an account?":"Already have an account?",e.jsx("button",{onClick:()=>{j(n==="signin"?"signup":"signin"),l("")},className:"font-semibold text-green-400 hover:underline ml-2",children:n==="signin"?"Sign Up":"Sign In"})]})]})}):null};export{T as default};
