import{v as b,j as e,ae as y,x as De,aF as Ae,b5 as Re,cK as Ee,D as G,ax as Z,Z as X,bL as V,z as Pe,ai as Ie,aq as _,aP as ie,aB as Y,a3 as oe,m as Oe,al as ce,aQ as Je,cL as de,bO as Ue,S as qe,E as xe,aO as ue,n as Be,au as Ve,bn as _e,X as Qe}from"./vendor-react-tt7m-l12.js";import{P as He,B as ee,C as Ke,D as We,F as Q,G as Ge,H as Ze}from"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";const ss=({onCollapse:pe})=>{const[z,A]=b.useState("overview"),[v,R]=b.useState([]),[j,w]=b.useState([]),[S,E]=b.useState([]),[i,M]=b.useState(null),[o,I]=b.useState(null),[me,T]=b.useState(!1),[O,se]=b.useState(""),[te,be]=b.useState({quickActions:!0,resources:!0}),[L,ae]=b.useState(null),[m,N]=b.useState({name:"",type:"classification",epochs:50,learningRate:.001,hiddenLayers:[64,32],datasetId:"",targetColumn:"",featureColumns:[]}),k=b.useRef(null),J=b.useRef(!1),p=(s,t)=>{ae({message:s,type:t}),setTimeout(()=>ae(null),4e3)},he=s=>{be(t=>({...t,[s]:!t[s]}))},ge=b.useCallback(s=>{var c;const t=(c=s.target.files)==null?void 0:c[0];if(!t)return;const a=t.name.endsWith(".csv"),r=t.name.endsWith(".json");if(!a&&!r){p("Please upload a CSV or JSON file","error");return}if(a)He.parse(t,{header:!0,complete:d=>{const n=d.data,x=d.meta.fields||[],u={id:`ds_${Date.now()}`,name:t.name,data:n.filter(h=>Object.values(h).some(g=>g!==""&&g!==null)),columns:x,rows:n.length,size:`${(t.size/1024).toFixed(1)} KB`,type:"csv",uploadedAt:new Date};R(h=>[...h,u]),p(`Dataset "${t.name}" uploaded successfully!`,"success")},error:d=>{p(`Failed to parse CSV: ${d.message}`,"error")}});else if(r){const d=new FileReader;d.onload=n=>{var x;try{const u=JSON.parse((x=n.target)==null?void 0:x.result),h=Array.isArray(u)?u:[u],g=h.length>0?Object.keys(h[0]):[],C={id:`ds_${Date.now()}`,name:t.name,data:h,columns:g,rows:h.length,size:`${(t.size/1024).toFixed(1)} KB`,type:"json",uploadedAt:new Date};R(F=>[...F,C]),p(`Dataset "${t.name}" uploaded successfully!`,"success")}catch{p("Failed to parse JSON file","error")}},d.readAsText(t)}k.current&&(k.current.value="")},[]),fe=(s,t)=>{const a=We();a.add(Q({units:s.hiddenLayers[0]||64,activation:"relu",inputShape:[t]}));for(let r=1;r<s.hiddenLayers.length;r++)a.add(Q({units:s.hiddenLayers[r],activation:"relu"})),a.add(Ge({rate:.2}));return s.type==="classification"?a.add(Q({units:1,activation:"sigmoid"})):a.add(Q({units:1,activation:"linear"})),a.compile({optimizer:Ze.adam(s.learningRate),loss:s.type==="classification"?"binaryCrossentropy":"meanSquaredError",metrics:["accuracy"]}),a},je=(s,t,a)=>{const r=[],c=[];for(const f of s.data){const l=a.map(P=>{const q=parseFloat(f[P]);return isNaN(q)?0:q}),D=parseFloat(f[t]);isNaN(D)||(r.push(l),c.push(D))}const d=ee(r),n=ee(c,[c.length,1]),{mean:x,variance:u}=Ke(d,0),h=d.sub(x).div(u.sqrt().add(1e-7)),g=Math.floor(r.length*.8),C=h.slice([0,0],[g,-1]),F=n.slice([0,0],[g,-1]),U=h.slice([g,0],[-1,-1]),$=n.slice([g,0],[-1,-1]);return{xTrain:C,yTrain:F,xTest:U,yTest:$,mean:x,variance:u}},ve=async s=>{const t=v.find(n=>n.id===s.datasetId);if(!t||!s.datasetId){p("Please select a dataset first","error");return}const a=t.targetColumn,r=t.featureColumns;if(!a||!r||r.length===0){p("Please configure target and feature columns","error");return}J.current=!1;const c=`job_${Date.now()}`,d={id:c,modelId:s.id,modelName:s.name,status:"running",progress:0,currentEpoch:0,totalEpochs:s.epochs,currentLoss:0,currentAccuracy:0,startedAt:new Date,logs:["Starting training..."]};E(n=>[d,...n]),w(n=>n.map(x=>x.id===s.id?{...x,status:"training"}:x)),A("training");try{const{xTrain:n,yTrain:x,xTest:u,yTest:h}=je(t,a,r),g=fe({...m,type:s.type,epochs:s.epochs,learningRate:s.learningRate,hiddenLayers:s.hiddenLayers},r.length),C={loss:[],accuracy:[]};if(await g.fit(n,x,{epochs:s.epochs,batchSize:32,validationSplit:.2,shuffle:!0,callbacks:{onEpochEnd:async(f,l)=>{if(J.current){g.stopTraining=!0;return}const D=(l==null?void 0:l.loss)||0,P=(l==null?void 0:l.acc)||(l==null?void 0:l.accuracy)||0;C.loss.push(D),C.accuracy.push(P),E(q=>q.map(B=>B.id===c?{...B,currentEpoch:f+1,progress:(f+1)/s.epochs*100,currentLoss:D,currentAccuracy:P,logs:[...B.logs,`Epoch ${f+1}/${s.epochs} - loss: ${D.toFixed(4)}, accuracy: ${(P*100).toFixed(2)}%`]}:B))}}}),J.current){E(f=>f.map(l=>l.id===c?{...l,status:"stopped",logs:[...l.logs,"Training stopped by user"]}:l)),w(f=>f.map(l=>l.id===s.id?{...l,status:"draft"}:l)),p("Training stopped","info");return}const F=g.evaluate(u,h),U=(await F[0].data())[0],$=(await F[1].data())[0];w(f=>f.map(l=>l.id===s.id?{...l,status:"trained",tfModel:g,accuracy:$,loss:U,trainedAt:new Date,trainingHistory:C}:l)),E(f=>f.map(l=>l.id===c?{...l,status:"completed",progress:100,currentLoss:U,currentAccuracy:$,logs:[...l.logs,`Training completed! Test accuracy: ${($*100).toFixed(2)}%`]}:l)),p(`Model trained successfully! Accuracy: ${($*100).toFixed(2)}%`,"success"),n.dispose(),x.dispose(),u.dispose(),h.dispose()}catch(n){console.error("Training error:",n),E(x=>x.map(u=>u.id===c?{...u,status:"failed",logs:[...u.logs,`Error: ${n.message}`]}:u)),w(x=>x.map(u=>u.id===s.id?{...u,status:"failed"}:u)),p(`Training failed: ${n.message}`,"error")}},H=()=>{J.current=!0},Ne=()=>{if(!m.name.trim()){p("Please enter a model name","error");return}const s={id:`model_${Date.now()}`,name:m.name,type:m.type,status:"draft",epochs:m.epochs,learningRate:m.learningRate,hiddenLayers:[...m.hiddenLayers],datasetId:m.datasetId,createdAt:new Date};w(t=>[s,...t]),M(s),T(!1),N({name:"",type:"classification",epochs:50,learningRate:.001,hiddenLayers:[64,32],datasetId:"",targetColumn:"",featureColumns:[]}),p(`Model "${s.name}" created!`,"success"),A("models")},ye=s=>{R(t=>t.filter(a=>a.id!==s)),(o==null?void 0:o.id)===s&&I(null),p("Dataset deleted","info")},we=s=>{const t=j.find(a=>a.id===s);t!=null&&t.tfModel&&t.tfModel.dispose(),w(a=>a.filter(r=>r.id!==s)),(i==null?void 0:i.id)===s&&M(null),p("Model deleted","info")},re=async s=>{if(!s.tfModel){p("Model has not been trained yet","error");return}try{await s.tfModel.save(`downloads://${s.name.replace(/\s+/g,"_")}`),p("Model exported successfully!","success")}catch(t){p(`Export failed: ${t.message}`,"error")}},[le,ke]=b.useState({}),[K,ne]=b.useState(null),Ce=async s=>{if(!s.tfModel){p("Model not trained","error");return}const t=v.find(n=>n.id===s.datasetId);if(!(t!=null&&t.featureColumns))return;const a=t.featureColumns.map(n=>{const x=parseFloat(le[n]||"0");return isNaN(x)?0:x}),r=ee([a]),c=s.tfModel.predict(r),d=(await c.data())[0];ne(s.type==="classification"?d>.5?1:0:d),r.dispose(),c.dispose()},W=s=>{switch(s){case"deployed":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"trained":case"completed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"training":case"running":return"bg-amber-500/20 text-amber-400 border-amber-500/30";case"failed":return"bg-red-500/20 text-red-400 border-red-500/30";case"stopped":case"draft":return"bg-slate-500/20 text-slate-400 border-slate-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}},ze=()=>e.jsxs("div",{className:"p-4 space-y-6 overflow-y-auto h-full custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-indigo-500/20 rounded-xl p-4 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{size:16,className:"text-purple-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-purple-300",children:"Models"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:j.length}),e.jsxs("div",{className:"text-[10px] text-purple-300 mt-1",children:[j.filter(s=>s.status==="trained").length," trained"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-xl p-4 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{size:16,className:"text-blue-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-blue-300",children:"Datasets"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:v.length}),e.jsxs("div",{className:"text-[10px] text-blue-300 mt-1",children:[v.reduce((s,t)=>s+t.rows,0).toLocaleString()," rows total"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-xl p-4 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{size:16,className:"text-amber-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-amber-300",children:"Training"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:S.filter(s=>s.status==="running").length}),e.jsx("div",{className:"text-[10px] text-amber-300 mt-1",children:"active jobs"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/20 to-green-500/20 rounded-xl p-4 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(V,{size:16,className:"text-emerald-400"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-300",children:"Best Accuracy"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:j.length>0?`${(Math.max(...j.filter(s=>s.accuracy).map(s=>s.accuracy||0))*100).toFixed(1)}%`:"-"}),e.jsx("div",{className:"text-[10px] text-emerald-300 mt-1",children:"across all models"})]})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>he("quickActions"),className:"flex items-center gap-2 w-full text-left mb-3",children:[te.quickActions?e.jsx(Pe,{size:14,className:"text-slate-500"}):e.jsx(Ie,{size:14,className:"text-slate-500"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Quick Actions"})]}),te.quickActions&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 p-3 bg-[var(--color-background-secondary)] hover:bg-[var(--color-background-hover)] rounded-lg border border-[var(--color-border)] transition-all group",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e.jsx(_,{size:14,className:"text-purple-400"})}),e.jsx("span",{className:"text-xs font-semibold text-slate-300",children:"New Model"})]}),e.jsxs("button",{onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},className:"flex items-center gap-2 p-3 bg-[var(--color-background-secondary)] hover:bg-[var(--color-background-hover)] rounded-lg border border-[var(--color-border)] transition-all group",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e.jsx(ie,{size:14,className:"text-blue-400"})}),e.jsx("span",{className:"text-xs font-semibold text-slate-300",children:"Upload Data"})]})]})]}),S.filter(s=>s.status==="running").length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-3 flex items-center gap-2",children:[e.jsx(Z,{size:12,className:"text-amber-400 animate-pulse"}),"Active Training"]}),e.jsx("div",{className:"space-y-2",children:S.filter(s=>s.status==="running").map(s=>e.jsxs("div",{className:"bg-[var(--color-background-secondary)] rounded-lg p-3 border border-[var(--color-border)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:s.modelName}),e.jsx("button",{onClick:H,className:"p-1 hover:bg-red-500/20 rounded transition-colors",title:"Stop Training",children:e.jsx(Y,{size:12,className:"text-red-400"})})]}),e.jsx("div",{className:"relative h-2 bg-slate-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-400",children:[e.jsxs("span",{children:["Epoch ",s.currentEpoch,"/",s.totalEpochs]}),e.jsxs("span",{children:["Loss: ",s.currentLoss.toFixed(4)]}),e.jsxs("span",{children:["Acc: ",(s.currentAccuracy*100).toFixed(1),"%"]})]})]},s.id))})]}),j.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-3",children:"Recent Models"}),e.jsx("div",{className:"space-y-2",children:j.slice(0,3).map(s=>e.jsxs("button",{onClick:()=>{M(s),A("models")},className:"w-full flex items-center gap-3 p-3 bg-[var(--color-background-secondary)] hover:bg-[var(--color-background-hover)] rounded-lg border border-[var(--color-border)] transition-all text-left",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(y,{size:14,className:"text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-white truncate",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[s.type," • ",s.epochs," epochs"]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-bold uppercase border ${W(s.status)}`,children:s.status})]},s.id))})]}),j.length===0&&v.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Welcome to ML Studio"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Upload a dataset to get started with real machine learning"}),e.jsx("button",{onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-sm font-semibold text-white transition-colors",children:"Upload Dataset"})]})]}),Se=()=>e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto h-full custom-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{type:"text",value:O,onChange:s=>se(s.target.value),placeholder:"Search datasets...",className:"w-full pl-9 pr-3 py-2 bg-[var(--color-background-secondary)] border border-[var(--color-border)] rounded-lg text-sm text-white placeholder-slate-500 focus:outline-none focus:border-cyan-500/50"})]}),e.jsx("button",{onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},className:"p-2 bg-cyan-500 hover:bg-cyan-400 rounded-lg text-white transition-colors",children:e.jsx(ie,{size:16})})]}),v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Datasets"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Upload a CSV or JSON file to get started"}),e.jsx("button",{onClick:()=>{var s;return(s=k.current)==null?void 0:s.click()},className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-sm font-semibold text-white transition-colors",children:"Upload Dataset"})]}):e.jsx("div",{className:"space-y-2",children:v.filter(s=>s.name.toLowerCase().includes(O.toLowerCase())).map(s=>e.jsx("div",{onClick:()=>I(s),className:`p-3 rounded-lg border cursor-pointer transition-all ${(o==null?void 0:o.id)===s.id?"bg-cyan-500/10 border-cyan-500/50":"bg-[var(--color-background-secondary)] border-[var(--color-border)] hover:border-cyan-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Oe,{size:16,className:"text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-white truncate",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[s.rows.toLocaleString()," rows × ",s.columns.length," cols"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:s.size}),e.jsx("button",{onClick:t=>{t.stopPropagation(),ye(s.id)},className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:e.jsx(ce,{size:12,className:"text-slate-500 hover:text-red-400"})})]})]})},s.id))}),o&&e.jsxs("div",{className:"mt-4 p-4 bg-[var(--color-background-secondary)] rounded-xl border border-[var(--color-border)]",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(Je,{size:14,className:"text-cyan-400"}),"Data Preview - ",o.name]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:"Target Column (what to predict)"}),e.jsxs("select",{value:o.targetColumn||"",onChange:s=>{const t={...o,targetColumn:s.target.value};R(a=>a.map(r=>r.id===o.id?t:r)),I(t)},className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-cyan-500",children:[e.jsx("option",{value:"",children:"Select target column..."}),o.columns.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:"Feature Columns (inputs)"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.columns.filter(s=>s!==o.targetColumn).map(s=>{var a;const t=(a=o.featureColumns)==null?void 0:a.includes(s);return e.jsx("button",{onClick:()=>{const r=o.featureColumns||[],c={...o,featureColumns:t?r.filter(d=>d!==s):[...r,s]};R(d=>d.map(n=>n.id===o.id?c:n)),I(c)},className:`px-2 py-1 rounded text-[10px] font-semibold transition-colors ${t?"bg-cyan-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:s},s)})})]})]}),e.jsx("div",{className:"bg-slate-900 rounded-lg p-3 font-mono text-xs overflow-x-auto max-h-48",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-400 border-b border-slate-700",children:[o.columns.slice(0,6).map(s=>e.jsx("th",{className:"text-left py-1 px-2 whitespace-nowrap",children:s},s)),o.columns.length>6&&e.jsx("th",{className:"text-left py-1 px-2",children:"..."})]})}),e.jsx("tbody",{className:"text-slate-300",children:o.data.slice(0,5).map((s,t)=>e.jsxs("tr",{className:"border-b border-slate-800",children:[o.columns.slice(0,6).map(a=>e.jsx("td",{className:"py-1 px-2 whitespace-nowrap max-w-[100px] truncate",children:String(s[a]??"")},a)),o.columns.length>6&&e.jsx("td",{className:"py-1 px-2",children:"..."})]},t))})]})}),e.jsxs("div",{className:"text-[10px] text-slate-500 mt-2",children:["Showing first 5 of ",o.rows," rows"]})]})]}),Me=()=>e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto h-full custom-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{type:"text",value:O,onChange:s=>se(s.target.value),placeholder:"Search models...",className:"w-full pl-9 pr-3 py-2 bg-[var(--color-background-secondary)] border border-[var(--color-border)] rounded-lg text-sm text-white placeholder-slate-500 focus:outline-none focus:border-purple-500/50"})]}),e.jsx("button",{onClick:()=>T(!0),className:"p-2 bg-purple-500 hover:bg-purple-400 rounded-lg text-white transition-colors",children:e.jsx(_,{size:16})})]}),j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Models"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Create your first ML model"}),e.jsx("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-sm font-semibold text-white transition-colors",children:"Create Model"})]}):e.jsx("div",{className:"space-y-2",children:j.filter(s=>s.name.toLowerCase().includes(O.toLowerCase())).map(s=>e.jsxs("div",{onClick:()=>M(s),className:`p-3 rounded-xl border cursor-pointer transition-all ${(i==null?void 0:i.id)===s.id?"bg-purple-500/10 border-purple-500/50":"bg-[var(--color-background-secondary)] border-[var(--color-border)] hover:border-purple-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:s.type==="classification"?e.jsx(V,{size:14,className:"text-purple-400"}):e.jsx(de,{size:14,className:"text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-white truncate",children:s.name}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[s.type," • ",s.epochs," epochs • lr=",s.learningRate]})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-bold uppercase border ${W(s.status)}`,children:s.status})]}),s.accuracy!==void 0&&e.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-400 pl-11",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:10,className:"text-emerald-400"}),"Accuracy: ",(s.accuracy*100).toFixed(2),"%"]}),s.loss!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ue,{size:10,className:"text-blue-400"}),"Loss: ",s.loss.toFixed(4)]})]})]},s.id))}),i&&e.jsxs("div",{className:"mt-4 p-4 bg-[var(--color-background-secondary)] rounded-xl border border-[var(--color-border)]",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-3 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qe,{size:14,className:"text-purple-400"}),i.name]}),e.jsx("button",{onClick:()=>we(i.id),className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:e.jsx(ce,{size:14,className:"text-slate-400 hover:text-red-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-[10px]",children:[e.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-slate-400",children:"Type"}),e.jsx("div",{className:"text-white font-semibold",children:i.type})]}),e.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-slate-400",children:"Epochs"}),e.jsx("div",{className:"text-white font-semibold",children:i.epochs})]}),e.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-slate-400",children:"Learning Rate"}),e.jsx("div",{className:"text-white font-semibold",children:i.learningRate})]}),e.jsxs("div",{className:"p-2 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-slate-400",children:"Layers"}),e.jsx("div",{className:"text-white font-semibold",children:i.hiddenLayers.join(" → ")})]})]}),i.status==="draft"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:"Training Dataset"}),e.jsxs("select",{value:i.datasetId||"",onChange:s=>{w(t=>t.map(a=>a.id===i.id?{...a,datasetId:s.target.value}:a)),M({...i,datasetId:s.target.value})},className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Select dataset..."}),v.filter(s=>s.targetColumn&&s.featureColumns&&s.featureColumns.length>0).map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.rows," rows)"]},s.id))]}),v.filter(s=>s.targetColumn&&s.featureColumns&&s.featureColumns.length>0).length===0&&e.jsx("p",{className:"text-[10px] text-amber-400 mt-1",children:"⚠️ Configure target and features in a dataset first"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.status==="draft"&&e.jsxs("button",{onClick:()=>ve(i),disabled:!i.datasetId,className:"flex items-center justify-center gap-2 py-2.5 bg-amber-500 hover:bg-amber-400 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded-lg text-xs font-semibold transition-colors",children:[e.jsx(xe,{size:14})," Train Model"]}),i.status==="trained"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>re(i),className:"flex items-center justify-center gap-2 py-2.5 bg-emerald-500 hover:bg-emerald-400 text-white rounded-lg text-xs font-semibold transition-colors",children:[e.jsx(ue,{size:14})," Export"]}),e.jsxs("button",{onClick:()=>A("deploy"),className:"flex items-center justify-center gap-2 py-2.5 bg-cyan-500 hover:bg-cyan-400 text-white rounded-lg text-xs font-semibold transition-colors",children:[e.jsx(X,{size:14})," Use Model"]})]}),i.status==="training"&&e.jsxs("button",{onClick:H,className:"col-span-2 flex items-center justify-center gap-2 py-2.5 bg-red-500 hover:bg-red-400 text-white rounded-lg text-xs font-semibold transition-colors",children:[e.jsx(Y,{size:14})," Stop Training"]})]})]})]}),Te=()=>e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto h-full custom-scrollbar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Training Jobs"}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:[S.length," total"]})]}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Training Jobs"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Train a model to see jobs here"})]}):e.jsx("div",{className:"space-y-3",children:S.map(s=>e.jsxs("div",{className:"p-4 bg-[var(--color-background-secondary)] rounded-xl border border-[var(--color-border)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:s.modelName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-bold uppercase border ${W(s.status)}`,children:s.status}),s.status==="running"&&e.jsx("button",{onClick:H,className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:e.jsx(Y,{size:12,className:"text-red-400"})})]})]}),e.jsx("div",{className:"relative h-3 bg-slate-700 rounded-full overflow-hidden mb-3",children:e.jsx("div",{className:`absolute inset-y-0 left-0 rounded-full transition-all duration-300 ${s.status==="completed"?"bg-emerald-500":s.status==="failed"?"bg-red-500":s.status==="stopped"?"bg-slate-500":"bg-gradient-to-r from-amber-500 to-orange-500"}`,style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-white",children:[s.currentEpoch,"/",s.totalEpochs]}),e.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:"Epoch"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-amber-400",children:s.currentLoss.toFixed(4)}),e.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:"Loss"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-emerald-400",children:[(s.currentAccuracy*100).toFixed(1),"%"]}),e.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:"Accuracy"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-cyan-400",children:[s.progress.toFixed(0),"%"]}),e.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:"Progress"})]})]}),e.jsx("div",{className:"bg-slate-900 rounded-lg p-2 max-h-32 overflow-y-auto font-mono text-[10px] text-slate-400",children:s.logs.slice(-10).map((t,a)=>e.jsx("div",{children:t},a))})]},s.id))})]}),Le=()=>{const s=j.filter(a=>a.status==="trained"),t=s.find(a=>a.id===(i==null?void 0:i.id))||s[0];return e.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto h-full custom-scrollbar",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Use Trained Models"})}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{size:48,className:"mx-auto mb-4 text-slate-600"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"No Trained Models"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Train a model first to make predictions"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-2 block",children:"Select Model"}),e.jsx("div",{className:"space-y-2",children:s.map(a=>e.jsx("button",{onClick:()=>{M(a),ne(null)},className:`w-full p-3 rounded-lg border text-left transition-all ${(t==null?void 0:t.id)===a.id?"bg-emerald-500/10 border-emerald-500/50":"bg-[var(--color-background-secondary)] border-[var(--color-border)] hover:border-emerald-500/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{size:14,className:"text-emerald-400"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:a.name})]}),e.jsxs("span",{className:"text-[10px] text-emerald-400",children:[(a.accuracy*100).toFixed(1),"% accuracy"]})]})},a.id))})]}),t&&e.jsxs("div",{className:"p-4 bg-[var(--color-background-secondary)] rounded-xl border border-emerald-500/30",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Ve,{size:14,className:"text-emerald-400"}),"Make Prediction"]}),(()=>{const a=v.find(r=>r.id===t.datasetId);return a!=null&&a.featureColumns?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4",children:a.featureColumns.map(r=>e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:r}),e.jsx("input",{type:"number",value:le[r]||"",onChange:c=>ke(d=>({...d,[r]:c.target.value})),placeholder:"Enter value...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-emerald-500"})]},r))}),e.jsxs("button",{onClick:()=>Ce(t),className:"w-full py-3 bg-emerald-500 hover:bg-emerald-400 rounded-lg text-sm font-bold text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(xe,{size:14})," Run Prediction"]}),K!==null&&e.jsxs("div",{className:"mt-4 p-4 bg-emerald-500/20 rounded-lg border border-emerald-500/30",children:[e.jsx("div",{className:"text-[10px] font-bold uppercase tracking-wider text-emerald-300 mb-1",children:"Prediction Result"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:t.type==="classification"?K===1?"✅ Positive (1)":"❌ Negative (0)":K.toFixed(4)})]})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"Dataset not found"})})()]}),t&&e.jsxs("div",{className:"p-4 bg-[var(--color-background-secondary)] rounded-xl border border-[var(--color-border)]",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(ue,{size:14,className:"text-blue-400"}),"Export Model"]}),e.jsxs("button",{onClick:()=>re(t),className:"w-full py-2.5 bg-blue-500 hover:bg-blue-400 rounded-lg text-sm font-semibold text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(_e,{size:14})," Download Model Files"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Exports as TensorFlow.js format (model.json + weights)"})]})]})]})},Fe=()=>e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>T(!1),children:e.jsxs("div",{className:"w-full max-w-md bg-[var(--color-background-secondary)] rounded-2xl border border-[var(--color-border)] shadow-2xl max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[var(--color-border)] sticky top-0 bg-[var(--color-background-secondary)]",children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(y,{size:20,className:"text-purple-400"}),"New ML Model"]}),e.jsx("button",{onClick:()=>T(!1),className:"p-1.5 hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(Qe,{size:18,className:"text-slate-400"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-2 block",children:"Model Name"}),e.jsx("input",{type:"text",value:m.name,onChange:s=>N(t=>({...t,name:s.target.value})),placeholder:"My ML Model",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-2 block",children:"Model Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>N(s=>({...s,type:"classification"})),className:`p-3 rounded-lg border flex flex-col items-center gap-2 transition-all ${m.type==="classification"?"bg-purple-500/20 border-purple-500":"bg-slate-800 border-slate-700 hover:border-purple-500/50"}`,children:[e.jsx(V,{size:18,className:"text-purple-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:"Classification"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"Predict categories (0/1)"})]}),e.jsxs("button",{onClick:()=>N(s=>({...s,type:"regression"})),className:`p-3 rounded-lg border flex flex-col items-center gap-2 transition-all ${m.type==="regression"?"bg-purple-500/20 border-purple-500":"bg-slate-800 border-slate-700 hover:border-purple-500/50"}`,children:[e.jsx(de,{size:18,className:"text-purple-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:"Regression"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"Predict continuous values"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:"Epochs"}),e.jsx("input",{type:"number",value:m.epochs,onChange:s=>N(t=>({...t,epochs:parseInt(s.target.value)||50})),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-1 block",children:"Learning Rate"}),e.jsx("input",{type:"number",step:"0.001",value:m.learningRate,onChange:s=>N(t=>({...t,learningRate:parseFloat(s.target.value)||.001})),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white focus:outline-none focus:border-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 mb-2 block",children:"Hidden Layers (neurons)"}),e.jsxs("div",{className:"flex gap-2",children:[m.hiddenLayers.map((s,t)=>e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:s,onChange:a=>{const r=[...m.hiddenLayers];r[t]=parseInt(a.target.value)||32,N(c=>({...c,hiddenLayers:r}))},className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-white text-center focus:outline-none focus:border-purple-500"})},t)),e.jsx("button",{onClick:()=>N(s=>({...s,hiddenLayers:[...s.hiddenLayers,32]})),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:e.jsx(_,{size:14,className:"text-slate-400"})})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 mt-1",children:["Architecture: Input → ",m.hiddenLayers.join(" → ")," → Output"]})]}),e.jsxs("button",{onClick:Ne,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 rounded-xl text-sm font-bold text-white transition-colors flex items-center justify-center gap-2",children:[e.jsx(_,{size:16})," Create Model"]})]})]})}),$e=[{id:"overview",label:"Overview",icon:e.jsx(Ee,{size:14})},{id:"datasets",label:"Data",icon:e.jsx(G,{size:14})},{id:"models",label:"Models",icon:e.jsx(y,{size:14})},{id:"training",label:"Training",icon:e.jsx(Z,{size:14})},{id:"deploy",label:"Predict",icon:e.jsx(X,{size:14})}];return e.jsxs("div",{className:"h-full flex flex-col bg-[var(--color-background)] text-white overflow-hidden",children:[e.jsx("input",{ref:k,type:"file",accept:".csv,.json",onChange:ge,className:"hidden"}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[var(--color-border)] flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{size:18,className:"text-purple-400"}),e.jsx("h2",{className:"text-sm font-bold text-white",children:"ML Studio"}),e.jsx("span",{className:"px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-[9px] font-bold rounded-full",children:"TensorFlow.js"})]}),e.jsx("button",{onClick:pe,className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(De,{size:16,className:"text-slate-400"})})]}),e.jsx("div",{className:"flex border-b border-[var(--color-border)] overflow-x-auto no-scrollbar flex-shrink-0",children:$e.map(s=>e.jsxs("button",{onClick:()=>A(s.id),className:`flex items-center gap-1.5 px-3 py-2.5 text-xs font-semibold whitespace-nowrap transition-colors border-b-2 ${z===s.id?"text-purple-400 border-purple-400 bg-purple-500/10":"text-slate-500 border-transparent hover:text-slate-300 hover:bg-white/5"}`,children:[s.icon,s.label]},s.id))}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[z==="overview"&&ze(),z==="datasets"&&Se(),z==="models"&&Me(),z==="training"&&Te(),z==="deploy"&&Le()]}),L&&e.jsxs("div",{className:`fixed bottom-4 right-4 z-[200] flex items-center gap-2 px-4 py-3 rounded-xl shadow-xl animate-slide-up ${L.type==="success"?"bg-emerald-500":L.type==="error"?"bg-red-500":"bg-slate-700"} text-white`,children:[L.type==="success"&&e.jsx(Ae,{size:16}),L.type==="error"&&e.jsx(Re,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:L.message})]}),me&&e.jsx(Fe,{}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            `})]})};export{ss as default};
