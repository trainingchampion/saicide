import{v as d,j as e,K as oe,aW as ce,bz as de,bA as xe,k as he,z as Z,A as _,aq as A,bB as pe,aH as K,au as U,bC as q,U as ue,aQ as me,ai as fe,e as V,F as P,h as be,S as ge,f as je,B as ye,p as ve}from"./vendor-react-tt7m-l12.js";import{I as F,a as Q}from"./index.dev-DC3GzjrE.js";import"./vendor-mcp-DCT6vnr2.js";import"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const y=50,O=20,Ne=5,we=({onCollapse:o,commits:t,minimal:l=!1})=>{const{paths:p,branchColumns:u}=d.useMemo(()=>{const a=[],f=Array.from(new Set(t.map(r=>r.branch))).sort((r,i)=>r==="main"||r==="master"?-1:i==="main"||i==="master"?1:r.localeCompare(i)).reduce((r,i,c)=>(r[i]=c,r),{});return t.forEach((r,i)=>{const c=(f[r.branch]||0)*O+15,x=i*y+25;r.parentIds.forEach(v=>{const n=t.findIndex(T=>T.id===v);if(n===-1)return;const B=t[n],h=(f[B.branch]||0)*O+15,b=n*y+25,I=x+(b-x)/2;let N="";c===h?N=`M ${c} ${x} L ${h} ${b}`:N=`M ${c} ${x} C ${c} ${I}, ${h} ${I}, ${h} ${b}`,a.push(e.jsx("path",{d:N,stroke:r.color,strokeWidth:"2",fill:"none",opacity:"0.6"},`${r.id}-${v}`))})}),{paths:a,branchColumns:f}},[t]);return e.jsxs("div",{className:`h-full flex flex-col text-[var(--color-text-primary)] ${l?"":"p-2 bg-[var(--color-background-secondary)]"}`,children:[!l&&e.jsxs("div",{className:"flex justify-between items-center p-2 flex-shrink-0",children:[e.jsx("h2",{className:"text-xs font-bold uppercase text-[var(--color-text-secondary)]",children:"Git Graph"}),o&&e.jsx("button",{onClick:o,title:"Collapse Panel",className:"text-[var(--color-text-secondary)] hover:text-white p-1 rounded-md hover:bg-[var(--color-background-tertiary)]",children:F.COLLAPSE_LEFT})]}),e.jsx("div",{className:"flex-1 overflow-auto relative p-2",children:e.jsxs("div",{className:"flex relative min-h-full",children:[e.jsx("div",{className:"sticky left-0 top-0 z-10",style:{width:"80px",flexShrink:0},children:e.jsxs("svg",{width:"100%",height:Math.max(t.length*y+50,300),className:"absolute top-0 left-0",children:[p,t.map((a,m)=>e.jsx("circle",{cx:(u[a.branch]||0)*O+15,cy:m*y+25,r:Ne,fill:a.color,stroke:"#1e2227",strokeWidth:"2"},a.id))]})}),e.jsx("div",{className:"flex-1 min-w-0 pt-2",children:t.length===0?e.jsx("div",{className:"text-center text-gray-500 text-sm mt-10",children:"No commits found."}):t.map((a,m)=>e.jsxs("div",{style:{height:y},className:"flex flex-col justify-center border-b border-[var(--color-border)]/30 px-2 hover:bg-[var(--color-background-tertiary)]/50 rounded ml-2 group cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-[10px] text-gray-500 bg-black/20 px-1 rounded",children:a.id.substring(0,7)}),e.jsx("span",{className:"text-sm font-medium text-gray-200 truncate",title:a.message,children:a.message})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{size:10})," ",a.author]}),e.jsx("span",{children:a.date}),a.branch!=="main"&&e.jsx("span",{className:"px-1.5 rounded-full text-[9px] font-bold border",style:{borderColor:a.color,color:a.color},children:a.branch})]})]},a.id))})]})})]})},Y=o=>{const t=o.toLowerCase();return t==="dockerfile"?e.jsx("div",{className:"text-blue-500",children:e.jsx(V,{size:14})}):t.endsWith(".ts")||t.endsWith(".tsx")?e.jsx(P,{size:14,className:"text-blue-300"}):t.endsWith(".js")||t.endsWith(".jsx")?e.jsx(P,{size:14,className:"text-yellow-300"}):t.endsWith(".json")?e.jsx(be,{size:14,className:"text-yellow-500"}):t.endsWith(".py")?e.jsx(P,{size:14,className:"text-blue-500"}):t.endsWith(".go")?e.jsx("div",{className:"text-cyan-400",children:e.jsx(V,{size:14})}):t.endsWith(".rs")?e.jsx(ge,{size:14,className:"text-orange-400"}):t.endsWith(".java")?e.jsx(je,{size:14,className:"text-red-400"}):t.endsWith(".c")||t.endsWith(".cpp")?e.jsx(ye,{size:14,className:"text-purple-400"}):e.jsx(ve,{size:14,className:"text-gray-400"})},X=({title:o,count:t,isExpanded:l,onToggle:p,actions:u})=>e.jsxs("div",{className:"flex items-center justify-between group py-1 px-1 cursor-pointer hover:bg-white/5 transition-colors",onClick:p,children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-black text-gray-500 uppercase tracking-[0.1em]",children:[l?e.jsx(Z,{size:12}):e.jsx(fe,{size:12}),o," ",t!==void 0&&t>0&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-gray-800 rounded-full text-[9px]",children:t})]}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",onClick:a=>a.stopPropagation(),children:u})]}),Le=({onCollapse:o,changes:t,stagedChanges:l,onStageFile:p,onUnstageFile:u,onStageAll:a,onUnstageAll:m,onCommit:R,onSync:f,isSyncing:r,currentBranch:i,branches:c,onBranchChange:x,onCreateBranch:v,onSelectFile:n,commits:B,view:h,onViewChange:b,fileStructure:I,activeModelId:N,onWriteToTerminal:T,onRefreshGitStatus:ke})=>{const[E,L]=d.useState(!1),[w,g]=d.useState(""),[ee,se]=d.useState("changes"),[k,C]=d.useState(!1),[te,G]=d.useState(!1),[M,j]=d.useState(""),S=h||ee,D=b||se,[z,ae]=d.useState({staged:!0,changes:!0,stashes:!1}),H=()=>{w.trim()&&(R(w),g(""))},J=s=>{ae(W=>({...W,[s]:!W[s]}))},re=async()=>{if(l.length!==0){C(!0),g("Jules is thinking...");try{const s=await Q.generateCommitMessage(l);g(s)}catch{g("// AI failed to generate message.")}finally{C(!1)}}},le=async()=>{C(!0),j("Jules is thinking...");try{const s="Changes in files: "+[...l,...t].map(ie=>ie.file).join(", "),W=await Q.generateBranchName(s);j(W)}catch{j("feat/ai-failed")}finally{C(!1)}},ne=()=>{M.trim()&&(v(M.trim()),G(!1),j(""))},$=t.length+l.length;return e.jsxs("div",{className:"h-full flex flex-col bg-[var(--color-background-secondary)] text-[var(--color-text-primary)]",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 flex-shrink-0 border-b border-[var(--color-border)] bg-[var(--color-background)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:12,className:"text-purple-400"}),e.jsx("h2",{className:"text-xs font-bold uppercase text-[var(--color-text-secondary)]",children:"Source Control"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-0.5 bg-black/20 p-0.5 rounded-md border border-white/5",children:[e.jsx("button",{onClick:()=>D("changes"),className:`p-1 rounded-sm transition-all ${S==="changes"?"bg-white/10 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,title:"Changes List",children:e.jsx(de,{size:14})}),e.jsx("button",{onClick:()=>D("graph"),className:`p-1 rounded-sm transition-all ${S==="graph"?"bg-white/10 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,title:"Git Graph",children:e.jsx(xe,{size:14})})]}),e.jsx("button",{onClick:o,title:"Collapse Panel",className:"text-gray-500 hover:text-white p-1 rounded-md transition-colors",children:F.COLLAPSE_LEFT})]})]}),S==="graph"?e.jsx(we,{commits:B,minimal:!0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-3 bg-[var(--color-background)] border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("button",{onClick:()=>L(!E),className:"w-full flex items-center justify-between gap-2 px-3 py-2 bg-black/20 hover:bg-black/40 border border-white/5 rounded-lg text-xs text-gray-300 transition-all font-bold",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx(he,{size:14,className:"text-cyan-400"}),e.jsx("span",{className:"truncate",children:i})]}),e.jsx(Z,{size:14,className:`text-gray-600 transition-transform ${E?"rotate-180":""}`})]}),E&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-full bg-[#1e2227] border border-white/10 rounded-xl shadow-2xl z-50 py-2 overflow-hidden animate-fade-in",children:[c.map(s=>e.jsxs("button",{onClick:()=>{x(s),L(!1)},className:`w-full text-left px-4 py-2 text-xs hover:bg-[var(--color-accent)]/20 hover:text-white flex items-center justify-between transition-colors ${i===s?"text-cyan-400 bg-white/5":"text-gray-400"}`,children:[e.jsx("span",{className:"font-bold",children:s}),i===s&&e.jsx(_,{size:12})]},s)),e.jsx("div",{className:"border-t border-white/5 mt-2 pt-2",children:e.jsxs("button",{onClick:()=>{G(!0),L(!1)},className:"w-full text-left px-4 py-2 text-xs text-cyan-400 hover:bg-white/5 flex items-center gap-2 font-bold",children:[e.jsx(A,{size:14})," New Branch..."]})})]})]}),e.jsx("button",{onClick:f,disabled:r,className:"ml-2 flex items-center justify-center p-2 bg-cyan-600/10 hover:bg-cyan-600/20 text-cyan-400 rounded-lg transition-all border border-cyan-600/20 disabled:opacity-30",title:"Sync with Remote",children:e.jsx(pe,{size:16,className:r?"animate-spin":""})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:w,onChange:s=>g(s.target.value),placeholder:"Commit message (Enter to commit)",className:"w-full bg-[#131b2c] border border-white/5 rounded-xl p-3 pr-12 text-sm focus:outline-none focus:border-cyan-500/50 resize-none h-[80px] font-medium placeholder-gray-600 shadow-inner",onKeyDown:s=>{s.key==="Enter"&&(s.ctrlKey||s.metaKey)&&H()}}),e.jsx("button",{onClick:re,disabled:k||l.length===0,className:"absolute bottom-2 right-2 p-1.5 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 rounded-full transition-all disabled:opacity-30",title:"Generate with Jules AI",children:k?e.jsx(K,{size:14,className:"animate-spin"}):e.jsx(U,{size:14})})]}),e.jsxs("button",{onClick:H,disabled:l.length===0||!w.trim(),className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white text-xs font-black uppercase tracking-[0.2em] py-2.5 rounded-xl transition-all disabled:opacity-30 disabled:grayscale shadow-lg shadow-cyan-900/20 flex items-center justify-center gap-2",children:[e.jsx(_,{size:16,strokeWidth:3})," Commit to ",i]})]}),te&&e.jsxs("div",{className:"mt-4 p-4 bg-black/20 rounded-xl border border-white/5 space-y-3 animate-fade-in",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400",children:"Create New Branch"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:s=>j(s.target.value),placeholder:"feat/new-feature-name",className:"w-full bg-[#131b2c] border border-white/5 rounded-lg py-2 pl-3 pr-10 text-sm focus:outline-none focus:border-cyan-500/50"}),e.jsx("button",{onClick:le,disabled:k,className:"absolute top-1/2 right-2 -translate-y-1/2 p-1.5 bg-purple-500/10 hover:bg-purple-500/20 text-purple-400 rounded-full transition-all disabled:opacity-30",title:"Generate with Jules AI",children:k?e.jsx(K,{size:14,className:"animate-spin"}):e.jsx(U,{size:14})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ne,className:"flex-1 py-1.5 text-xs font-bold bg-cyan-600 hover:bg-cyan-500 text-white rounded",children:"Create"}),e.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-1.5 text-xs font-bold bg-white/5 hover:bg-white/10 text-gray-300 rounded",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-4 select-none",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{title:"Staged Changes",count:l.length,isExpanded:z.staged,onToggle:()=>J("staged"),actions:e.jsx("button",{onClick:m,className:"hover:text-white p-1 text-gray-500",children:e.jsx(q,{size:14})})}),z.staged&&l.map(s=>e.jsxs("div",{className:"group flex items-center justify-between py-1.5 px-3 rounded-lg hover:bg-white/5 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1",onClick:()=>n==null?void 0:n(s.file),children:[Y(s.file),e.jsx("span",{className:"text-xs text-gray-300 truncate font-medium",children:s.file.split("/").pop()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black text-green-400 w-4 text-center",children:s.status}),e.jsx("button",{onClick:()=>u(s.file),className:"opacity-0 group-hover:opacity-100 p-1 hover:text-white text-gray-500",children:e.jsx(q,{size:14})})]})]},s.file))]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{title:"Changes",count:t.length,isExpanded:z.changes,onToggle:()=>J("changes"),actions:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"hover:text-white p-1 text-gray-500",children:e.jsx(ue,{size:14})}),e.jsx("button",{onClick:a,className:"hover:text-white p-1 text-gray-500",children:e.jsx(A,{size:14})})]})}),z.changes&&(t.length===0?e.jsx("div",{className:"text-center py-4 text-[10px] text-gray-600 font-bold uppercase tracking-widest",children:"Workspace Clean"}):t.map(s=>e.jsxs("div",{className:"group flex items-center justify-between py-1.5 px-3 rounded-lg hover:bg-white/5 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-1",onClick:()=>n==null?void 0:n(s.file),children:[Y(s.file),e.jsx("span",{className:"text-xs text-gray-300 truncate font-medium",children:s.file.split("/").pop()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-black w-4 text-center ${s.status==="M"?"text-yellow-500":"text-green-500"}`,children:s.status}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex items-center gap-1",children:[e.jsx("button",{onClick:()=>n==null?void 0:n(s.file),className:"p-1 text-gray-500 hover:text-cyan-400",title:"Open Diff",children:e.jsx(me,{size:14})}),e.jsx("button",{onClick:()=>p(s.file),className:"p-1 text-gray-500 hover:text-white",children:e.jsx(A,{size:14})})]})]})]},s.file)))]})]}),$>0&&e.jsxs("div",{className:"p-4 bg-black/10 border-t border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[e.jsx("span",{children:"Workspace Summary"}),e.jsxs("span",{className:"text-cyan-400",children:[$," Changes"]})]}),e.jsxs("div",{className:"mt-3 flex gap-1 h-1.5 rounded-full overflow-hidden bg-gray-800",children:[e.jsx("div",{className:"bg-green-500 h-full",style:{width:`${l.length/$*100}%`}}),e.jsx("div",{className:"bg-yellow-500 h-full",style:{width:`${t.length/$*100}%`}})]})]})]})]})};export{Le as default};
