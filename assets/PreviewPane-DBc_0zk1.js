import{v as c,j as e,Z as U,aj as E,bH as F,bc as M,a0 as I,X as _,aX as H,aV as T,ah as A,ap as B,bf as K}from"./vendor-react-tt7m-l12.js";const $=(d,x="")=>{let r={};return d.type==="file"?r[x]=d.content||"":d.children&&d.children.forEach(p=>{const o=x?`${x}/${p.name}`:p.name;Object.assign(r,$(p,o))}),r},X=({onCollapse:d,fileStructure:x})=>{const[r,p]=c.useState("http://localhost:3000"),[o,g]=c.useState(""),[h,y]=c.useState("desktop"),[v,f]=c.useState(!1),[w,R]=c.useState(null),S=c.useRef(null),L=()=>{const t=$(x),m=Object.keys(t);let i=m.find(s=>s.endsWith("index.html")&&s.split("/").length>1&&!s.includes("alphabet-explorer"))||m.find(s=>s.endsWith("index.html"))||m.find(s=>s.endsWith(".html"));if(!i||!t[i])return`data:text/html,<html><body style="background:#080a0f;color:white;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;text-align:center;padding:40px;">
                <div style="animation: fadeIn 0.5s ease-out;">
                    <div style="font-size:64px;margin-bottom:24px;">ðŸ”­</div>
                    <h2 style="color:#67e8f9;margin-bottom:12px;font-weight:900;letter-spacing:-0.02em;text-transform:uppercase;font-size:14px;">Runtime Offline</h2>
                    <p style="color:#9ca3af;font-size:13px;max-width:320px;line-height:1.6;margin:0 auto;">Opal synthesis engine is ready, but no entry-point (index.html) was detected in the active workspace.</p>
                </div>
            </body></html>`;const b=i.includes("/")?i.substring(0,i.lastIndexOf("/")):"",O=i.includes("/")?i.split("/")[0]:"root";R(O);let n=t[i];const N=s=>{if(!s||s.startsWith("http")||s.startsWith("data:")||s.startsWith("//"))return null;const a=s.replace(/^\.\//,"").replace(/^\//,""),l=b?`${b}/${a}`:a;if(t[l])return t[l];const P=a.split("/").pop(),z=m.find(D=>D.startsWith(b)&&D.endsWith(P));return z?t[z]:null};n=n.replace(/<link[^>]+href=["']([^"']+)["'][^>]*\/?>/gi,(s,a)=>{const l=N(a);return l?`<style data-source="${a}">${l}</style>`:s}),n=n.replace(/<script[^>]+src=["']([^"']+)["'][^>]*><\/script>/gi,(s,a)=>{const l=N(a);return l?`<script type="module" data-source="${a}">${l}<\/script>`:s});const k=`
            <script src="https://cdn.tailwindcss.com"><\/script>
            <script>
                window.onerror = function(msg, url, line, col, error) {
                    const errorDiv = document.createElement('div');
                    errorDiv.style.position = 'fixed';
                    errorDiv.style.bottom = '10px';
                    errorDiv.style.left = '10px';
                    errorDiv.style.right = '10px';
                    errorDiv.style.padding = '15px';
                    errorDiv.style.background = '#fee2e2';
                    errorDiv.style.color = '#991b1b';
                    errorDiv.style.borderRadius = '8px';
                    errorDiv.style.fontFamily = 'monospace';
                    errorDiv.style.fontSize = '12px';
                    errorDiv.style.zIndex = '9999';
                    errorDiv.style.boxShadow = '0 10px 15px -3px rgba(0,0,0,0.1)';
                    errorDiv.innerHTML = '<strong>Runtime Error:</strong><br>' + msg + ' (Line: ' + line + ')';
                    document.body.appendChild(errorDiv);
                    return false;
                };
            <\/script>
        `;n.includes("</head>")?n=n.replace("</head>",`${k}</head>`):n=k+n;const W=new Blob([n],{type:"text/html"});return URL.createObjectURL(W)},u=()=>{if(f(!0),o.startsWith("blob:")&&URL.revokeObjectURL(o),r.includes("localhost")||r.includes("3000")){try{const t=L();g(t)}catch(t){console.error("Compilation failed",t)}setTimeout(()=>f(!1),300)}else{let t=r;r.startsWith("http")||(t=`https://${r}`),g(t),setTimeout(()=>f(!1),1200)}};c.useEffect(()=>(u(),()=>{o.startsWith("blob:")&&URL.revokeObjectURL(o)}),[x]);const C=t=>{t.key==="Enter"&&u()},j=()=>{if(r.includes("localhost")||r.includes("3000"))window.open(`${window.location.origin}${window.location.pathname}#preview=true`,"_blank");else{let t=r;r.startsWith("http")||(t=`https://${r}`),window.open(t,"_blank")}};return e.jsxs("div",{className:"p-0 h-full flex flex-col bg-[#080a0f] text-white relative",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 h-12 flex-shrink-0 border-b border-white/5 bg-[#0b0e14]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:14,className:"text-cyan-400 fill-current"}),e.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400",children:"Live Synthesis"})]}),e.jsx("div",{className:"h-4 w-px bg-white/10"}),w&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-cyan-500/10 rounded-full border border-cyan-500/20",children:[e.jsx(E,{size:10,className:"text-cyan-400"}),e.jsx("span",{className:"text-[9px] font-black text-cyan-400 uppercase tracking-tighter",children:w})]}),e.jsxs("div",{className:"flex items-center bg-black/40 rounded-lg border border-white/5 px-2 py-0.5 gap-2",children:[e.jsx("button",{onClick:()=>y("mobile"),className:`p-1 rounded transition-colors ${h==="mobile"?"text-cyan-400 bg-cyan-500/10":"text-gray-500 hover:text-white"}`,children:e.jsx(F,{size:14})}),e.jsx("button",{onClick:()=>y("desktop"),className:`p-1 rounded transition-colors ${h==="desktop"?"text-cyan-400 bg-cyan-500/10":"text-gray-500 hover:text-white"}`,children:e.jsx(M,{size:14})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:j,className:"p-1.5 text-gray-500 hover:text-cyan-400 transition-all hover:bg-white/5 rounded-lg",title:"Open Full Page Synthesis",children:e.jsx(I,{size:16})}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-white p-1.5 transition-all transform active:scale-90",children:e.jsx(_,{size:18})})]})]}),e.jsxs("div",{className:"px-4 py-2 bg-[#0b0e14] border-b border-white/5 flex items-center gap-3",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:"p-1.5 text-gray-600 hover:text-gray-300 transition-colors",children:e.jsx(H,{size:16})}),e.jsx("button",{className:"p-1.5 text-gray-600 hover:text-gray-300 transition-colors",children:e.jsx(T,{size:16})}),e.jsx("button",{onClick:u,className:"p-1.5 text-gray-600 hover:text-cyan-400 transition-colors",children:e.jsx(A,{size:16,className:v?"animate-spin":""})})]}),e.jsxs("div",{className:"flex-1 flex items-center bg-[#161b22] border border-white/5 rounded-xl px-4 py-1.5 relative group shadow-inner",children:[e.jsx(B,{size:12,className:"text-gray-500 mr-2"}),e.jsx("input",{type:"text",value:r,onChange:t=>p(t.target.value),onKeyDown:C,className:"flex-1 bg-transparent border-none text-xs text-gray-400 focus:outline-none font-mono focus:text-white"}),e.jsx("button",{onClick:j,className:"ml-2 text-gray-600 hover:text-cyan-400 transition-colors",title:"Open in new window",children:e.jsx(K,{size:14})})]})]}),e.jsxs("div",{className:"flex-1 bg-[#12141a] relative overflow-hidden flex justify-center items-center p-6",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(#fff 1px, transparent 0)",backgroundSize:"32px 32px"}}),e.jsxs("div",{className:`transition-all duration-700 ease-[cubic-bezier(0.2,0.8,0.2,1)] border border-white/10 shadow-[0_30px_100px_rgba(0,0,0,0.6)] bg-white overflow-hidden relative ${h==="mobile"?"w-[375px] h-[700px] rounded-[3rem] ring-8 ring-gray-900":"w-full h-full rounded-2xl"}`,children:[h==="mobile"&&e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-gray-900 rounded-b-3xl z-20"}),e.jsx("iframe",{ref:S,src:o,className:"w-full h-full border-none",title:"Live Runtime",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})]}),v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#080a0f]/60 backdrop-blur-sm z-30 animate-fade-in",children:e.jsxs("div",{className:"flex flex-col items-center bg-[#161b22] p-8 rounded-[2.5rem] border border-white/10 shadow-2xl scale-110",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-6"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-cyan-400 animate-pulse",children:"Syncing Neural Buffers"})]})})]})]})};export{X as default};
