import{v as o,j as a}from"./vendor-react-tt7m-l12.js";import{T as d,E as h}from"./index.dev-D8ZHRTqV.js";import"./vendor-mcp-DCT6vnr2.js";import"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const P=()=>{const[l,r]=o.useState(null),[i,S]=o.useState(localStorage.getItem("sai_theme")||"S.AI Default"),[m,p]=o.useState(250),u=o.useRef(null);o.useEffect(()=>{const n=window.location.hash.substring(1),s=new URLSearchParams(n).get("popoutKey");if(s)try{const t=localStorage.getItem(s);if(t){const c=JSON.parse(t);r(c),document.title=`${c.name} - SAI Editor`}else r({name:"Session Expired",type:"file",content:"File data not found in local storage. Please try popping out the file again."})}catch(t){console.error("Failed to load popped-out file:",t),r({name:"Error",type:"file",content:`Critical Error: ${t instanceof Error?t.message:"Unknown"}`})}},[]),o.useEffect(()=>{const n=d.find(e=>e.name===i)||d[0];Object.entries(n.colors).forEach(([e,s])=>{document.documentElement.style.setProperty(e,s)})},[i]);const f=n=>{r(e=>e?{...e,content:n}:null)};if(!l)return a.jsxs("div",{className:"w-screen h-screen bg-[#0b0e14] flex flex-col items-center justify-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em]",children:"Loading Neural Buffer..."})]});const g={name:"standalone-workspace",type:"folder",children:[l]};return a.jsx("div",{className:"h-screen w-screen flex flex-col bg-[var(--color-background)]",children:a.jsx(h,{ref:u,file:l,onFileUpdate:f,onCloseFile:()=>window.close(),onUndo:()=>{},onRedo:()=>{},appEvents:[],onClearEvents:()=>{},onGoToFile:()=>{},onOpenChat:()=>alert("Chat is restricted in standalone mode."),onOpenSettings:()=>{},onStartDebugging:()=>{},onCloneRepo:()=>{},onChangePanel:()=>{},onNewFile:()=>{},fontSize:"14",wordWrap:"off",keymap:"vscode",vimMode:!1,isMac:/Mac|iPod|iPhone|iPad/.test(navigator.platform),onOpenCommandPalette:()=>{},collaborationState:{},teamMembers:[],currentUser:null,fileStructure:g,setFileStructure:()=>{},canEdit:!0,terminalHeight:m,onTerminalResize:p,policies:[],securityIssues:[],installedExtensions:[],onGetSuggestions:()=>{},onClearProblems:()=>{},onValidateCommand:()=>({allowed:!0}),diffData:null,onCloseDiff:()=>{},onReturnToSetup:()=>{}})})};export{P as default};
