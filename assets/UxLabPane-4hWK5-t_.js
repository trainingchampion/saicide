import{v as s,j as e,af as K,X as F,P as H,b as o,b8 as X,aP as q,ah as P,bK as V,A as U,bn as T,aJ as Q,au as Z,ax as ee,w as te,Y as se}from"./vendor-react-tt7m-l12.js";import{a as $}from"./index.dev-vR_ZKarG.js";import"./vendor-mcp-CN8JrFe1.js";import"./vendor-misc-sHEHZw9n.js";import"./vendor-network-DBeEYzJJ.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const E=[{id:"refactor",label:"Logic Refactor",icon:e.jsx(o,{size:16}),description:"Analyze code for performance bottlenecks and modern patterns.",prompt:"Act as a Senior Principal Engineer. Refactor the provided code to use modern ESNext/TypeScript patterns, optimize for time complexity, and ensure dry principles are followed. Provide ONLY the refactored code block.",color:"text-blue-400"},{id:"security",label:"Security Shield",icon:e.jsx(te,{size:16}),description:"Perform a deep-logic scan for OWASP vulnerabilities and leakages.",prompt:"Act as a Security Researcher. Scrutinize the provided code for security flaws, hardcoded secrets, and injection vulnerabilities. Return a markdown table of findings and a hardened version of the code.",color:"text-emerald-400"},{id:"docs",label:"Spec Architect",icon:e.jsx(se,{size:16}),description:"Generate comprehensive technical specs and JSDoc annotations.",prompt:"Act as a Technical Architect. Analyze the code and generate a formal architecture spec including: Purpose, Parameters, Returns, Complexity, and an usage example. Output in professional Markdown.",color:"text-purple-400"}],f=[{id:"stitch",name:"Google Stitch",provider:"Material 3+",tokens:!0},{id:"tailwind",name:"Tailwind UI",provider:"Utility First",tokens:!1},{id:"carbon",name:"IBM Carbon",provider:"Enterprise",tokens:!0}],de=({onCollapse:D,onSaveFile:S,activeModelId:b})=>{const[g,k]=s.useState("ui"),[a,O]=s.useState(null),[c,C]=s.useState(!1),[i,j]=s.useState(null),[y,W]=s.useState(f[2]),[z,v]=s.useState(!1),I=s.useRef(null),[d,G]=s.useState(E[0]),[x,M]=s.useState(""),[p,R]=s.useState(!1),[l,u]=s.useState(null),[A,w]=s.useState(!1),L=t=>{var m;const r=(m=t.target.files)==null?void 0:m[0];if(r){const N=new FileReader;N.onload=h=>{var n;return O((n=h.target)==null?void 0:n.result)},N.readAsDataURL(r)}},Y=async()=>{if(a){C(!0),j(null),v(!1);try{const t=b.includes("image")?b:"gemini-2.5-flash-image",r=a.split(",")[1],m=a.split(",")[0].split(":")[1].split(";")[0],h=(await $.getChatResponse({prompt:`Convert this design into a pixel-perfect React component using the ${y.name} Design System.
                Requirements:
                - Use ${y.name} design tokens and CSS variables.
                - If Google Stitch is selected, strictly follow Material 3 token naming (e.g., md-sys-color-primary).
                - Ensure the layout is fluid and utilizes semantic HTML5.
                - Implement accessibility (ARIA roles).
                - Return ONLY the TypeScript/React code block.`,modelId:t,attachments:[{data:r,mimeType:m,name:"mockup.png"}]})).text||"",n=h.match(/```(?:jsx|tsx|html|js)?\n([\s\S]*?)```/);j(n?n[1]:h||"Synthesis failed.")}catch(t){console.error(t),j("// Error in Stitch Synthesis Pipeline. Please verify your Neural API Key and Model compatibility.")}finally{C(!1)}}},_=()=>{if(!i)return;const t=`StitchComponent_${Date.now()}.tsx`;S(`src/components/stitch/${t}`,i),v(!0),setTimeout(()=>v(!1),2e3)},B=async()=>{if(x.trim()){R(!0),u(null),w(!1);try{const t=await $.getChatResponse({prompt:`${d.prompt}

INPUT CODE:
${x}`,modelId:b});u(t.text||"Synthesis yielded no results.")}catch{u("Critical failure in neural synthesis pipeline.")}finally{R(!1)}}},J=()=>{if(!l)return;const t=`${d.id}_synthesis_${Date.now()}.md`;S(`studio/${t}`,l),w(!0),setTimeout(()=>w(!1),2e3)};return e.jsx("div",{className:"flex h-full w-full bg-[#0b0e14] overflow-hidden text-white font-sans",children:e.jsxs("main",{className:"flex-1 flex flex-col bg-[#0b0e14] overflow-hidden",children:[e.jsxs("div",{className:"p-8 border-b border-white/5 bg-[#0f111a]/30 flex justify-between items-start shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-white mb-2 flex items-center gap-3",children:[e.jsx(K,{size:24,className:"text-blue-400"}),"Stitch Studio"]}),e.jsx("p",{className:"text-sm text-gray-500 max-w-lg",children:"Synthesize pixel-perfect UI from mockups or refactor complex logic with AI."})]}),e.jsx("button",{onClick:D,className:"p-2 hover:bg-white/5 rounded-full text-gray-500 hover:text-white transition-all",children:e.jsx(F,{size:24})})]}),e.jsxs("div",{className:"px-8 border-b border-white/5 flex gap-2",children:[e.jsxs("button",{onClick:()=>k("ui"),className:`px-4 py-3 text-sm font-bold border-b-2 flex items-center gap-2 ${g==="ui"?"text-white border-blue-500":"text-gray-500 border-transparent hover:text-white"}`,children:[e.jsx(H,{size:16})," UI Stitch"]}),e.jsxs("button",{onClick:()=>k("code"),className:`px-4 py-3 text-sm font-bold border-b-2 flex items-center gap-2 ${g==="code"?"text-white border-blue-500":"text-gray-500 border-transparent hover:text-white"}`,children:[e.jsx(o,{size:16})," Code Synthesis"]})]}),g==="ui"?e.jsxs("div",{className:"flex-1 flex divide-x divide-white/5 overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 flex flex-col p-8 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(X,{size:12})," Visual Mockup"]}),e.jsxs("div",{onClick:()=>{var t;return(t=I.current)==null?void 0:t.click()},className:"aspect-video bg-[#0d1117] border-2 border-dashed border-white/10 rounded-2xl flex flex-col items-center justify-center text-center p-6 cursor-pointer hover:border-blue-500/50 hover:bg-blue-500/5 transition-all group",children:[e.jsx("input",{ref:I,type:"file",accept:"image/*",className:"hidden",onChange:L}),a?e.jsx("img",{src:a,alt:"Mockup",className:"max-w-full max-h-full object-contain rounded-lg"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-2xl flex items-center justify-center text-gray-500 group-hover:text-blue-400 border border-white/5 group-hover:border-blue-500/20 transition-all mb-4",children:e.jsx(q,{size:24})}),e.jsx("p",{className:"text-sm font-bold text-gray-300",children:"Drop your design here"}),e.jsx("p",{className:"text-xs text-gray-500",children:"or click to browse. Supports PNG, JPG, WebP."})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"Design System"}),e.jsx("select",{value:y.id,onChange:t=>W(f.find(r=>r.id===t.target.value)||f[0]),className:"w-full bg-[#131b2c] border border-white/5 rounded-xl px-3 py-2 text-xs text-white focus:outline-none focus:border-blue-500/50 appearance-none",children:f.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.provider,")"]},t.id))})]}),e.jsxs("button",{onClick:Y,disabled:c||!a,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-[0.3em] shadow-xl shadow-blue-900/20 transition-all disabled:opacity-30 disabled:grayscale active:scale-[0.98] flex items-center justify-center gap-3 mt-auto",children:[c?e.jsx(P,{size:18,className:"animate-spin"}):e.jsx(V,{size:18}),c?"Stitching...":"Synthesize Component"]})]}),e.jsxs("div",{className:"w-1/2 flex flex-col p-8 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(o,{size:12})," Synthesized Output"]}),i&&e.jsxs("button",{onClick:_,className:"text-[10px] font-black text-emerald-400 uppercase flex items-center gap-1.5 hover:underline",children:[z?e.jsx(U,{size:12}):e.jsx(T,{size:12}),z?"Injected":"Save to Workspace"]})]}),e.jsxs("div",{className:"flex-1 bg-[#0d1117] border border-white/5 rounded-2xl overflow-hidden shadow-inner relative",children:[c?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm z-10 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest animate-pulse",children:"Neural engine processing..."})]}):null,i?e.jsx("pre",{className:"p-4 text-[11px] font-mono h-full overflow-auto custom-scrollbar text-cyan-100/80 leading-relaxed",children:e.jsx("code",{children:i})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-20",children:[e.jsx(Q,{size:48,strokeWidth:1,className:"mb-4"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Awaiting Mockup"})]})]})]})]}):e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("nav",{className:"w-72 border-r border-white/5 bg-[#0f111a] p-6 flex flex-col gap-8 flex-shrink-0",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest px-2",children:"Workbenches"}),e.jsx("div",{className:"space-y-1.5",children:E.map(t=>e.jsxs("button",{onClick:()=>{G(t),u(null)},className:`w-full text-left p-4 rounded-2xl flex items-center gap-4 transition-all group ${d.id===t.id?"bg-white/5 text-white border border-white/10 shadow-xl":"text-gray-500 hover:text-gray-300 hover:bg-white/[0.02] border border-transparent"}`,children:[e.jsx("div",{className:`transition-transform group-hover:scale-110 ${d.id===t.id?t.color:"text-gray-600"}`,children:t.icon}),e.jsx("span",{className:"text-xs font-bold",children:t.label})]},t.id))})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden p-8 gap-8",children:[e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(o,{size:14})," Source logic"]}),e.jsx("textarea",{value:x,onChange:t=>M(t.target.value),placeholder:"Paste code to synthesize...",className:"flex-1 bg-[#0d1117] border border-white/5 rounded-[2rem] p-6 font-mono text-sm text-blue-100/70 focus:outline-none focus:border-blue-500/30 shadow-inner resize-none custom-scrollbar"}),e.jsxs("button",{onClick:B,disabled:p||!x.trim(),className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-[0.3em] shadow-xl shadow-blue-900/20 transition-all disabled:opacity-30 disabled:grayscale active:scale-[0.98] flex items-center justify-center gap-3 mt-auto",children:[p?e.jsx(P,{size:18,className:"animate-spin"}):e.jsx(Z,{size:18}),p?"Synthesizing...":"Run Analysis"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(ee,{size:12})," Analysis Result"]}),l&&e.jsxs("button",{onClick:J,className:"text-[10px] font-black text-emerald-400 uppercase flex items-center gap-1.5 hover:underline",children:[A?e.jsx(U,{size:12}):e.jsx(T,{size:12}),A?"Injected":"Save Report"]})]}),e.jsxs("div",{className:"flex-1 bg-[#0d1117] border border-white/5 rounded-2xl overflow-hidden shadow-inner relative",children:[p?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm z-10 space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest animate-pulse",children:"Neural engine processing..."})]}):null,l?e.jsx("pre",{className:"p-4 text-[11px] font-mono h-full overflow-auto custom-scrollbar text-purple-100/80 leading-relaxed whitespace-pre-wrap",children:l}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-20",children:[e.jsx(o,{size:48,strokeWidth:1,className:"mb-4"}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Ready for Logic"})]})]})]})]})]})]})})};export{de as default};
