import{v as s,j as e,I as S,$ as V,a0 as X,cu as A,a1 as _,cy as J,z as K,b9 as Q,cz as Z,cA as ee,cB as te,aB as se,a_ as ae,cC as re,cD as le,M as oe,S as ne,cE as ie}from"./vendor-react-tt7m-l12.js";const H=({member:x,stream:r,isLocal:u})=>{const a=s.useRef(null);return s.useEffect(()=>{a.current&&r&&(a.current.srcObject=r)},[r]),e.jsxs("div",{className:"relative w-48 h-28 bg-gray-900/80 rounded-lg overflow-hidden border-2 border-transparent group-hover:border-gray-600 transition-all shadow-lg flex-shrink-0",children:[r?e.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:u,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:e.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-full flex items-center justify-center text-lg font-bold text-gray-300",children:x.initials})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-1.5 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("span",{className:"text-white text-xs font-semibold drop-shadow-md",children:[x.name," ",u&&"(You)"]})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 rounded-full p-1",children:e.jsx(S,{size:12,className:"text-white"})})]})},ce=x=>{const[r,u]=s.useState(x),[a,h]=s.useState(!1),l=s.useRef({x:0,y:0}),f=o=>{o.target.closest("button, input, select")||(h(!0),l.current={x:o.clientX-r.x,y:o.clientY-r.y})};return s.useEffect(()=>{const o=c=>{a&&u({x:c.clientX-l.current.x,y:c.clientY-l.current.y})},i=()=>h(!1);return a&&(window.addEventListener("mousemove",o),window.addEventListener("mouseup",i)),()=>{window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",i)}},[a]),{pos:r,handleMouseDown:f,isDragging:a}},xe=({teamMembers:x,currentUser:r,onStopSession:u,isMinimized:a,onToggleMinimize:h,isMicOn:l,onToggleMic:f,onToggleLiveChat:o})=>{const[i,c]=s.useState(null),[g,k]=s.useState(!1),[m,C]=s.useState(!1),[z,T]=s.useState(!1),[d,Y]=s.useState(!1),[L,E]=s.useState(0),[b,P]=s.useState(!0),[p,D]=s.useState(!1),[v,R]=s.useState(!1),[U,M]=s.useState([]),{pos:$,handleMouseDown:B}=ce({x:window.innerWidth/2-250,y:window.innerHeight-180});s.useEffect(()=>{let t;return d?t=setInterval(()=>{E(n=>n+1)},1e3):E(0),()=>clearInterval(t)},[d]);const O=t=>{const n=Math.floor(t/60),y=t%60;return`${n.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},j=t=>{t==null||t.getTracks().forEach(n=>n.stop())},w=async()=>{if(g)j(i),c(null),k(!1);else{m&&await I();try{const t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});c(t),k(!0)}catch(t){console.error(t)}}},I=async()=>{if(m)j(i),c(null),C(!1);else{g&&w();try{const t=await navigator.mediaDevices.getDisplayMedia({video:!0});c(t),C(!0)}catch(t){console.error(t)}}},F=()=>{Y(!d)},W=t=>{const n=Date.now(),y=40+Math.random()*20;M(N=>[...N,{id:n,emoji:t,left:y}]),D(!1),setTimeout(()=>{M(N=>N.filter(G=>G.id!==n))},2e3)};s.useEffect(()=>(w(),()=>j(i)),[]);const q=x.filter(t=>t.status==="online");return e.jsxs(e.Fragment,{children:[d&&e.jsxs("div",{className:"fixed top-24 left-6 z-[200] flex items-center gap-2 bg-red-600/90 backdrop-blur text-white px-3 py-1.5 rounded-full shadow-lg animate-pulse font-mono text-sm",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-white rounded-full"}),"REC ",O(L)]}),e.jsx("div",{className:"fixed inset-0 pointer-events-none z-[200] overflow-hidden",children:U.map(t=>e.jsxs("div",{className:"absolute bottom-32 text-4xl animate-float-up opacity-0 transition-all duration-[2000ms]",style:{left:`${t.left}%`,transform:"translateY(-200px)"},children:[e.jsx("style",{children:`
                            @keyframes floatUp {
                                0% { transform: translateY(0) scale(0.5); opacity: 0; }
                                20% { transform: translateY(-40px) scale(1.2); opacity: 1; }
                                100% { transform: translateY(-300px) scale(1); opacity: 0; }
                            }
                        `}),e.jsx("div",{style:{animation:"floatUp 2s ease-out forwards"},children:t.emoji})]},t.id))}),e.jsx("div",{className:`fixed z-[200] flex flex-col items-center gap-4 animate-slide-in-from-bottom transition-all duration-300 ${a?"right-0 top-1/2 -translate-y-1/2":""}`,style:a?{}:{left:`${$.x}px`,top:`${$.y}px`,width:"fit-content",maxWidth:"100vw"},children:a?e.jsxs("div",{className:"bg-[#131b2c]/90 backdrop-blur-md border border-gray-700/50 rounded-l-full py-3 px-3 flex flex-col items-center gap-4 shadow-2xl transition-colors hover:border-cyan-500",children:[e.jsx("div",{className:"flex flex-col items-center gap-2 border-b border-gray-700 pb-3",children:e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})}),e.jsx("button",{onClick:f,className:`p-2 rounded-full ${l?"text-white hover:bg-white/10":"text-red-500 bg-red-500/10"}`,children:l?e.jsx(S,{size:18}):e.jsx(V,{size:18})}),e.jsx("button",{onClick:h,className:"p-2 rounded-full text-gray-400 hover:text-white hover:bg-white/10",title:"Expand Controls",children:e.jsx(X,{size:18})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`transition-all duration-300 ease-in-out w-full ${b?"opacity-100 h-auto mb-4":"opacity-0 h-0 overflow-hidden mb-0"}`,children:e.jsxs("div",{className:"flex justify-center gap-3 overflow-x-auto w-full pb-2 no-scrollbar px-4",children:[e.jsx(H,{member:r,stream:i,isLocal:!0}),q.filter(t=>t.id!==r.id).slice(0,4).map(t=>e.jsx(H,{member:t},t.id))]})}),e.jsxs("div",{className:"relative bg-[#131b2c]/90 backdrop-blur-md border border-gray-700/50 rounded-2xl p-2 px-3 flex items-center gap-3 shadow-2xl",children:[e.jsx("div",{className:"cursor-move text-gray-600 hover:text-gray-400 flex items-center px-1",onMouseDown:B,title:"Drag to move",children:e.jsx(A,{size:18})}),p&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-4 bg-[#1e2227] border border-gray-700 rounded-full p-2 flex gap-2 shadow-xl animate-fade-in whitespace-nowrap",children:["ðŸ‘","ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸŽ‰"].map(t=>e.jsx("button",{onClick:()=>W(t),className:"p-2 hover:bg-white/10 rounded-full text-xl transition-colors hover:scale-110 active:scale-95",children:t},t))}),v&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-4 w-64 bg-[#1e2227] border border-gray-700 rounded-xl p-4 shadow-xl animate-fade-in text-left",children:[e.jsx("h3",{className:"font-bold text-white mb-3 text-sm",children:"Session Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Camera"}),e.jsxs("select",{className:"w-full bg-black/30 border border-gray-600 rounded text-xs p-1.5 text-white outline-none",children:[e.jsx("option",{children:"FaceTime HD Camera"}),e.jsx("option",{children:"External Webcam"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Microphone"}),e.jsxs("select",{className:"w-full bg-black/30 border border-gray-600 rounded text-xs p-1.5 text-white outline-none",children:[e.jsx("option",{children:"Default - MacBook Pro Mic"}),e.jsx("option",{children:"External Mic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Speaker"}),e.jsx("select",{className:"w-full bg-black/30 border border-gray-600 rounded text-xs p-1.5 text-white outline-none",children:e.jsx("option",{children:"Default - MacBook Pro Speakers"})})]})]}),e.jsx("button",{onClick:()=>R(!1),className:"mt-3 w-full bg-[var(--color-accent)] text-white text-xs py-1.5 rounded hover:bg-[var(--color-accent-hover)]",children:"Done"})]}),e.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-700 pr-2",children:[e.jsx("button",{onClick:h,className:"p-2 rounded-full text-gray-400 hover:text-white hover:bg-white/10 transition-colors",title:"Compact Mode",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:()=>P(!b),className:"p-2 rounded-full text-gray-400 hover:text-white hover:bg-white/10 transition-colors",title:b?"Hide Videos":"Show Videos",children:b?e.jsx(K,{size:20}):e.jsx(J,{size:20})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:f,className:`p-3 rounded-full transition-all duration-200 ${l?"bg-gray-700/50 hover:bg-gray-600 text-white":"bg-red-500 text-white hover:bg-red-600"}`,title:l?"Mute":"Unmute",children:l?e.jsx(S,{size:20}):e.jsx(V,{size:20})}),e.jsx("button",{onClick:w,className:`p-3 rounded-full transition-all duration-200 ${g?"bg-gray-700/50 hover:bg-gray-600 text-white":"bg-red-500 text-white hover:bg-red-600"}`,title:g?"Turn Off Camera":"Turn On Camera",children:g?e.jsx(Q,{size:20}):e.jsx(Z,{size:20})})]}),e.jsx("div",{className:"w-px h-8 bg-gray-700/50 mx-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:I,className:`p-3 rounded-full transition-all duration-200 ${m?"bg-green-500 text-white hover:bg-green-600":"bg-gray-700/50 hover:bg-gray-600 text-white"}`,title:"Share Screen",children:m?e.jsx(ee,{size:20}):e.jsx(te,{size:20})}),e.jsx("button",{onClick:F,className:`p-3 rounded-full transition-all duration-200 ${d?"bg-red-600 text-white animate-pulse":"bg-gray-700/50 hover:bg-gray-600 text-white"}`,title:d?"Stop Recording":"Record Session",children:d?e.jsx(se,{size:20,fill:"currentColor"}):e.jsx(ae,{size:20,fill:"currentColor",className:"text-red-500"})}),e.jsx("button",{onClick:()=>T(!z),className:`p-3 rounded-full transition-all duration-200 ${z?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-gray-700/50 hover:bg-gray-600 text-white"}`,title:"Raise Hand",children:e.jsx(re,{size:20})}),e.jsx("button",{onClick:()=>D(!p),className:`p-3 rounded-full transition-all duration-200 ${p?"bg-[var(--color-accent)] text-white":"bg-gray-700/50 hover:bg-gray-600 text-white"}`,title:"Reactions",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"w-px h-8 bg-gray-700/50 mx-1"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:o,className:"p-3 rounded-full transition-all duration-200 relative bg-gray-700/50 hover:bg-gray-600 text-white",title:"Session Chat",children:e.jsx(oe,{size:20})}),e.jsx("button",{onClick:()=>R(!v),className:`p-3 rounded-full transition-all duration-200 ${v?"bg-[var(--color-accent)] text-white":"bg-gray-700/50 hover:bg-gray-600 text-white"}`,title:"Settings",children:e.jsx(ne,{size:20})})]}),e.jsxs("button",{onClick:u,className:"ml-3 px-5 py-2.5 rounded-xl bg-red-600 hover:bg-red-700 text-white font-semibold flex items-center gap-2 transition-colors shadow-lg shadow-red-900/20",title:"End Session",children:[e.jsx(ie,{size:18,className:"fill-current"}),e.jsx("span",{className:"hidden md:inline",children:"Leave"})]})]})]})})]})};export{xe as default};
