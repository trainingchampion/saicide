import{v as o,j as e,a6 as X,X as Q,bV as Y,au as M,ah as U,bW as V,al as q,aL as Z,D as ee,aq as te,bd as se,A as ae,bn as re,E as ne}from"./vendor-react-tt7m-l12.js";import{a as oe,P as le}from"./index.dev-DC3GzjrE.js";import"./vendor-mcp-DCT6vnr2.js";import"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const me=F=>{const[I,D]=o.useState("client"),K=()=>{const{onCollapse:p,activeModelId:T,onSaveFile:m,onRunInTerminal:E,onPanelChange:i}=F,[j,v]=o.useState([{id:"1",path:"/users",method:"GET",description:"Fetch all users"},{id:"2",path:"/users",method:"POST",description:"Register new user"}]),[N,b]=o.useState(!1),[x,h]=o.useState(null),[f,P]=o.useState("Node.js (Express)"),[z,w]=o.useState(!1),R=()=>{v([...j,{id:Date.now().toString(),path:"/",method:"GET",description:"New endpoint"}])},a=(s,l)=>{v(j.map(c=>c.id===s?{...c,...l}:c))},C=s=>{v(j.filter(l=>l.id!==s))},L=async()=>{b(!0),h(null),w(!1);try{const s=`Act as a senior backend architect. Generate a complete API implementation in ${f} for the following endpoints: ${JSON.stringify(j)}.
                Use best practices for error handling, middleware, and documentation. Return the code in a single markdown code block.`,c=(await oe.getChatResponse({prompt:s,modelId:T})).text||"",t=c.match(/```(?:javascript|typescript|js|ts|go|py|python|rs)?\n([\s\S]*?)```/);h(t?t[1]:c||"Synthesis failed.")}catch(s){console.error(s),h("// Synthesis error. Verify API configuration.")}finally{b(!1)}},$=()=>{const s=f.toLowerCase();return s.includes("node")?"js":s.includes("go")?"go":s.includes("python")?"py":s.includes("rust")?"rs":"txt"},O=()=>{if(!x)return;const s=$(),l=`ApiImplementation_${Date.now()}.${s}`;m(`api/${l}`,x),w(!0),setTimeout(()=>w(!1),2e3)},A=()=>{if(!x)return;const s=$(),c=`api/${`api_forge_impl.${s}`}`;m(c,x);let t="";s==="js"?t=`node ${c}`:s==="go"?t=`go run ${c}`:s==="py"?t=`python ${c}`:s==="rs"&&(t="cargo run --manifest-path api/Cargo.toml"),t&&(E(t),i(le.TERMINAL))};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar",children:[e.jsxs("section",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-[10px] font-black uppercase text-gray-500 tracking-widest",children:"Interface Design"}),e.jsxs("button",{onClick:R,className:"text-cyan-400 hover:text-cyan-300 flex items-center gap-1 text-[10px] font-black uppercase",children:[e.jsx(te,{size:14})," Add Route"]})]}),e.jsx("div",{className:"space-y-2",children:j.map(s=>e.jsxs("div",{className:"p-4 bg-white/[0.02] border border-white/5 rounded-2xl space-y-3 group hover:border-cyan-500/30 transition-all shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:s.method,onChange:l=>a(s.id,{method:l.target.value}),className:`bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[10px] font-black uppercase outline-none ${s.method==="GET"?"text-green-400":s.method==="POST"?"text-yellow-400":s.method==="PUT"?"text-blue-400":"text-red-400"}`,children:[e.jsx("option",{children:"GET"}),e.jsx("option",{children:"POST"}),e.jsx("option",{children:"PUT"}),e.jsx("option",{children:"DELETE"})]}),e.jsx("input",{type:"text",value:s.path,onChange:l=>a(s.id,{path:l.target.value}),className:"flex-1 bg-transparent border-b border-white/5 focus:border-cyan-500 outline-none text-xs font-mono text-gray-300"}),e.jsx("button",{onClick:()=>C(s.id),className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(q,{size:14})})]}),e.jsx("input",{type:"text",value:s.description,onChange:l=>a(s.id,{description:l.target.value}),placeholder:"Endpoint description...",className:"w-full bg-transparent text-[10px] text-gray-500 italic outline-none"})]},s.id))})]}),e.jsxs("section",{className:"bg-cyan-500/5 border border-cyan-500/10 rounded-2xl p-5 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest ml-1",children:"Synthesis Engine"}),e.jsxs("select",{value:f,onChange:s=>P(s.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-2.5 text-xs font-bold text-gray-300 outline-none",children:[e.jsx("option",{children:"Node.js (Express)"}),e.jsx("option",{children:"Go (Fiber)"}),e.jsx("option",{children:"Python (FastAPI)"}),e.jsx("option",{children:"Rust (Actix-web)"})]})]}),e.jsxs("button",{onClick:L,disabled:N,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-700 hover:from-cyan-500 hover:to-blue-600 text-white rounded-xl font-black text-[10px] uppercase tracking-[0.2em] shadow-xl shadow-cyan-900/20 transition-all disabled:opacity-30 flex items-center justify-center gap-2",children:[N?e.jsx(U,{size:14,className:"animate-spin"}):e.jsx(M,{size:14}),N?"Forging...":"Synthesize API"]})]}),x&&e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center px-1",children:[e.jsxs("h3",{className:"text-[10px] font-black uppercase text-gray-500 tracking-widest flex items-center gap-2",children:[e.jsx(se,{size:12,className:"text-cyan-400"})," Source Logic"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:O,className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest hover:underline flex items-center gap-1.5",children:[z?e.jsx(ae,{size:12}):e.jsx(re,{size:12}),z?"Injected":"Save to Workspace"]}),e.jsxs("button",{onClick:A,className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest hover:underline flex items-center gap-1.5 bg-emerald-500/10 px-2 py-1 rounded-md border border-emerald-500/20",children:[e.jsx(ne,{size:12})," Run in Terminal"]})]})]}),e.jsx("div",{className:"bg-[#0b0c10] rounded-2xl border border-white/5 overflow-hidden shadow-2xl relative",children:e.jsx("pre",{className:"p-4 text-[11px] font-mono text-cyan-100/70 overflow-x-auto custom-scrollbar leading-relaxed",children:e.jsx("code",{children:x})})})]})]})},W=()=>{const[p,T]=o.useState("GET"),[m,E]=o.useState("https://jsonplaceholder.typicode.com/todos/1"),[i,j]=o.useState("params"),[v,N]=o.useState("body"),[b,x]=o.useState([{key:"",value:"",enabled:!0}]),[h,f]=o.useState([{key:"Content-Type",value:"application/json",enabled:!0},{key:"",value:"",enabled:!0}]),[P,z]=o.useState(`{
  
}`),[w,R]=o.useState(!1),[a,C]=o.useState(null),[L,$]=o.useState([]),[O,A]=o.useState(!1),s=(t,n,r,y,g)=>{const u=[...t];u[r][y]=g,r===u.length-1&&(u[r].key||u[r].value)&&u.push({key:"",value:"",enabled:!0}),n(u)},l=async()=>{if(!m)return;R(!0),C(null);const t=performance.now();try{const n=m.startsWith("http")?m:`https://${m}`,r=new URL(n);b.forEach(d=>{d.enabled&&d.key&&r.searchParams.append(d.key,d.value)});const y={};h.forEach(d=>{d.enabled&&d.key&&(y[d.key]=d.value)});const g={method:p,headers:y};p!=="GET"&&p!=="DELETE"&&(g.body=P);const u=O?`https://api.allorigins.win/raw?url=${encodeURIComponent(r.toString())}`:r.toString(),k=await fetch(u,g),_=performance.now(),H={};k.headers.forEach((d,J)=>{H[J]=d});let S;const B=k.headers.get("content-type");B&&B.indexOf("application/json")!==-1?S=await k.json():S=await k.text();const G=new Blob([typeof S=="string"?S:JSON.stringify(S)]).size;C({status:k.status,statusText:k.statusText,time:Math.round(_-t),size:G>1024?(G/1024).toFixed(2)+" KB":G+" B",data:S,headers:H}),$(d=>[{method:p,url:r.toString(),timestamp:Date.now()},...d.slice(0,9)])}catch(n){const r=performance.now();C({status:0,statusText:"Error",time:Math.round(r-t),size:"0 B",data:{error:n.message,hint:n.message.includes("CORS")||n.message.includes("Failed to fetch")?"Try enabling the CORS Proxy option above":"Check the URL and try again"}})}finally{R(!1)}},c=t=>{T(t.method),E(t.url)};return e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-[var(--color-background-secondary)] border-b border-white/5 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:p,onChange:t=>T(t.target.value),className:`bg-black/40 border border-white/10 rounded-lg px-2 py-1.5 text-xs font-black focus:outline-none ${p==="GET"?"text-green-400":p==="POST"?"text-yellow-400":p==="PUT"?"text-blue-400":p==="DELETE"?"text-red-400":"text-purple-400"}`,children:["GET","POST","PUT","DELETE","PATCH"].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("input",{type:"text",value:m,onChange:t=>E(t.target.value),onKeyDown:t=>t.key==="Enter"&&l(),placeholder:"https://api.example.com/v1",className:"flex-1 bg-black/40 border border-white/10 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:border-[var(--color-accent)] font-mono text-gray-300"}),e.jsxs("button",{onClick:l,disabled:w||!m,className:"bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white px-4 py-1.5 rounded-lg text-xs font-black uppercase tracking-widest flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[w?e.jsx(U,{size:14,className:"animate-spin"}):e.jsx(V,{size:14})," Send"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 text-[10px] text-gray-500 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:t=>A(t.target.checked),className:"h-3 w-3 rounded bg-gray-700 border-gray-600 accent-[var(--color-accent)]"}),e.jsx("span",{children:"CORS Proxy"}),e.jsx("span",{className:"text-[9px] text-gray-600",children:"(for APIs without CORS headers)"})]}),L.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] text-gray-600",children:"Recent:"}),L.slice(0,3).map((t,n)=>e.jsxs("button",{onClick:()=>c(t),className:`text-[9px] px-2 py-0.5 rounded border border-white/10 hover:border-white/30 transition-all ${t.method==="GET"?"text-green-400":t.method==="POST"?"text-yellow-400":"text-blue-400"}`,children:[t.method," ",new URL(t.url).pathname.slice(0,15),"..."]},n))]})]})]}),e.jsx("div",{className:"flex px-3 bg-[#0f111a] border-b border-white/5 flex-shrink-0",children:["Params","Headers","Body"].map(t=>e.jsx("button",{onClick:()=>j(t.toLowerCase()),className:`px-4 py-3 text-[10px] font-black uppercase tracking-widest border-b-2 transition-all flex items-center gap-2 ${i===t.toLowerCase()?"border-[var(--color-accent)] text-white":"border-transparent text-gray-500 hover:text-gray-300"}`,children:t},t))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[(i==="params"||i==="headers")&&e.jsx("div",{className:"space-y-2",children:(i==="params"?b:h).map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:()=>{const r=i==="params"?b:h,y=i==="params"?x:f,g=[...r];g[n].enabled=!g[n].enabled,y(g)},className:"h-3.5 w-3.5 rounded bg-gray-700 border-gray-600 accent-[var(--color-accent)]"}),e.jsx("input",{type:"text",placeholder:"Key",value:t.key,onChange:r=>s(i==="params"?b:h,i==="params"?x:f,n,"key",r.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-1.5 text-xs text-white focus:border-[var(--color-accent)] outline-none"}),e.jsx("input",{type:"text",placeholder:"Value",value:t.value,onChange:r=>s(i==="params"?b:h,i==="params"?x:f,n,"value",r.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-1.5 text-xs text-white focus:border-[var(--color-accent)] outline-none"}),e.jsx("button",{onClick:()=>{const r=i==="params"?b:h,y=i==="params"?x:f;r.length>1&&y(r.filter((g,u)=>u!==n))},className:"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 p-1",children:e.jsx(q,{size:14})})]},n))}),i==="body"&&e.jsx("textarea",{value:P,onChange:t=>z(t.target.value),placeholder:'{\\n  "key": "value"\\n}',className:"w-full h-full bg-black/30 border border-white/10 rounded-xl p-4 font-mono text-xs text-gray-300 focus:border-[var(--color-accent)] outline-none resize-none min-h-[120px]"})]}),e.jsxs("div",{className:"h-2/5 border-t border-white/5 flex flex-col min-h-[200px]",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 px-4 border-b border-white/5 bg-[#0f111a]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Response"}),a&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>N("body"),className:`px-2 py-1 rounded text-[9px] font-bold transition-all ${v==="body"?"bg-white/10 text-white":"text-gray-500 hover:text-gray-300"}`,children:"Body"}),e.jsxs("button",{onClick:()=>N("headers"),className:`px-2 py-1 rounded text-[9px] font-bold transition-all ${v==="headers"?"bg-white/10 text-white":"text-gray-500 hover:text-gray-300"}`,children:["Headers (",a.headers?Object.keys(a.headers).length:0,")"]})]})]}),a&&e.jsxs("div",{className:"flex gap-4 text-[9px] font-black uppercase",children:[e.jsxs("span",{className:`flex items-center gap-1 ${a.status&&a.status<300?"text-emerald-400":a.status&&a.status<400?"text-yellow-400":"text-rose-400"}`,children:[a.status," ",a.statusText]}),e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(Z,{size:10})," ",a.time,"ms"]}),e.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(ee,{size:10})," ",a.size]})]})]}),e.jsx("div",{className:"flex-1 bg-black/20 relative overflow-hidden",children:w?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(U,{className:"animate-spin text-emerald-400",size:24})}):a?v==="body"?e.jsx("pre",{className:"p-4 text-[11px] font-mono h-full overflow-auto text-emerald-100/80 custom-scrollbar",children:typeof a.data=="object"?JSON.stringify(a.data,null,2):a.data}):e.jsx("div",{className:"p-4 h-full overflow-auto custom-scrollbar",children:e.jsx("table",{className:"w-full text-[11px]",children:e.jsx("tbody",{children:a.headers&&Object.entries(a.headers).map(([t,n])=>e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 pr-4 text-cyan-400 font-semibold whitespace-nowrap",children:t}),e.jsx("td",{className:"py-2 text-gray-300 font-mono break-all",children:n})]},t))})})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 italic text-xs gap-2",children:[e.jsx(V,{size:24,className:"opacity-30"}),e.jsx("span",{children:"Enter a URL and click Send to make a request"})]})})]})]})};return e.jsxs("div",{className:"flex flex-col h-full bg-[#0b0e14] text-white",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 bg-[#0f111a] flex justify-between items-center flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{size:18,className:"text-cyan-400"}),e.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-gray-400",children:"API Studio"})]}),e.jsx("button",{onClick:F.onCollapse,className:"text-gray-500 hover:text-white transition-colors",children:e.jsx(Q,{size:18})})]}),e.jsxs("div",{className:"flex bg-black/20 p-1 mx-4 mt-4 rounded-xl border border-white/5 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>D("client"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${I==="client"?"bg-white/5 text-white shadow-lg":"text-gray-500 hover:text-gray-400"}`,children:[e.jsx(Y,{size:12})," Client"]}),e.jsxs("button",{onClick:()=>D("forge"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${I==="forge"?"bg-white/5 text-white shadow-lg":"text-gray-500 hover:text-gray-400"}`,children:[e.jsx(M,{size:12})," Forge"]})]}),I==="client"?e.jsx(W,{}):e.jsx(K,{})]})};export{me as default};
