import{v as i,j as e,aK as F,X as P,aL as $,Z as U,au as I,aV as H,q as M,cM as E,a3 as J,aD as K,aE as Q,i as R,T as D,k as W,S as _,o as V,_ as B,s as Z,aJ as q,bm as X}from"./vendor-react-tt7m-l12.js";const Y=[{id:"file",prefix:">",label:"Go to File",description:"Search files by name",icon:e.jsx(R,{size:14})},{id:"cmd",prefix:":",label:"Run Command",description:"Execute editor commands",icon:e.jsx(D,{size:14})},{id:"git",prefix:"@",label:"Git Actions",description:"Source control operations",icon:e.jsx(W,{size:14})},{id:"settings",prefix:"#",label:"Settings",description:"Change preferences",icon:e.jsx(_,{size:14})}],O={File:e.jsx(R,{size:12}),View:e.jsx(X,{size:12}),AI:e.jsx(I,{size:12}),Git:e.jsx(W,{size:12}),Terminal:e.jsx(D,{size:12}),Settings:e.jsx(_,{size:12}),Panel:e.jsx(q,{size:12}),Project:e.jsx(M,{size:12}),Tools:e.jsx(Z,{size:12}),Collaboration:e.jsx(B,{size:12}),Help:e.jsx(V,{size:12})},se=({isOpen:f,onClose:c,commands:j,onAskOracle:l})=>{const[a,m]=i.useState(""),[h,w]=i.useState(0),[z,S]=i.useState([]),[d,u]=i.useState("commands"),k=i.useRef(null),G=i.useRef(null),y=i.useRef([]);i.useEffect(()=>{const s=localStorage.getItem("sai_recent_commands");if(s)try{S(JSON.parse(s))}catch{}},[]);const N=i.useCallback(s=>{S(t=>{const r=[s,...t.filter(o=>o!==s)].slice(0,5);return localStorage.setItem("sai_recent_commands",JSON.stringify(r)),r})},[]);i.useEffect(()=>{a.startsWith(">")?u("files"):a.startsWith("@")?u("git"):a.startsWith("#")?u("settings"):u("commands")},[a]);const n=i.useMemo(()=>a.startsWith(">")||a.startsWith("@")||a.startsWith("#")||a.startsWith(":")?a.slice(1).trim():a,[a]),g=i.useMemo(()=>{let s=j;return d==="git"?s=s.filter(t=>t.category.toLowerCase().includes("git")||t.category.toLowerCase().includes("source")):d==="settings"?s=s.filter(t=>t.category.toLowerCase().includes("setting")||t.label.toLowerCase().includes("setting")||t.label.toLowerCase().includes("config")):d==="files"&&(s=s.filter(t=>t.category.toLowerCase().includes("file")||t.label.toLowerCase().includes("file")||t.label.toLowerCase().includes("open"))),s.filter(t=>t.label.toLowerCase().includes(n.toLowerCase())||t.category.toLowerCase().includes(n.toLowerCase()))},[j,n,d]),L=i.useMemo(()=>z.map(s=>j.find(t=>t.id===s)).filter(Boolean),[z,j]),b=n.length>2&&g.length===0&&l,x=i.useMemo(()=>{const s=[...g];return b&&s.push({isOracle:!0,label:`Ask AI Oracle: "${n}"`}),s},[g,b,n]),A=i.useMemo(()=>b?{}:g.reduce((s,t)=>((s[t.category]=s[t.category]||[]).push(t),s),{}),[g,b]);if(i.useEffect(()=>{f&&(m(""),w(0),u("commands"),setTimeout(()=>{var s;return(s=k.current)==null?void 0:s.focus()},100))},[f]),i.useEffect(()=>{const s=t=>{if(f){if(t.key==="ArrowDown")t.preventDefault(),w(r=>(r+1)%Math.max(1,x.length));else if(t.key==="ArrowUp")t.preventDefault(),w(r=>(r-1+x.length)%Math.max(1,x.length));else if(t.key==="Enter"){t.preventDefault();const r=x[h];r&&("isOracle"in r&&r.isOracle?l==null||l(n):"action"in r&&(N(r.id),r.action()),c())}else if(t.key==="Escape")c();else if(t.key==="Tab"){t.preventDefault();const r=["commands","files","git","settings"],o=r.indexOf(d),p=r[(o+1)%r.length];m({commands:"",files:">",git:"@",settings:"#"}[p])}}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[f,x,h,c,n,l,d,N]),i.useEffect(()=>{var s;(s=y.current[h])==null||s.scrollIntoView({block:"nearest"})},[h]),!f)return null;let v=-1;const C=!a&&!n;return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex justify-center pt-16",onClick:c,children:e.jsxs("div",{className:"bg-[#161b22] w-full max-w-2xl rounded-2xl shadow-2xl border border-white/10 flex flex-col max-h-[70vh] animate-fade-in overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-white/10 flex-shrink-0 bg-[#1c2128]",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 shadow-lg",children:e.jsx(F,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{ref:k,type:"text",value:a,onChange:s=>{m(s.target.value),w(0)},placeholder:"Type a command or search...",className:"w-full bg-[#0d1117] border border-white/10 rounded-xl py-3 px-4 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500/50 focus:ring-2 focus:ring-blue-500/20 transition-all text-base"}),a&&e.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-white/10 rounded-lg text-gray-500 hover:text-white transition-colors",children:e.jsx(P,{size:14})})]})]}),e.jsx("div",{className:"flex items-center gap-1 px-4 py-2 border-b border-white/5 bg-[#161b22]",children:[{id:"commands",label:"Commands",prefix:""},{id:"files",label:"Files",prefix:">"},{id:"git",label:"Git",prefix:"@"},{id:"settings",label:"Settings",prefix:"#"}].map(s=>e.jsxs("button",{onClick:()=>m(s.prefix),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${d===s.id?"bg-blue-500/20 text-blue-400":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.prefix&&e.jsx("span",{className:"mr-1 font-mono text-gray-600",children:s.prefix}),s.label]},s.id))}),e.jsxs("div",{ref:G,className:"flex-1 overflow-y-auto",children:[C&&e.jsxs("div",{className:"p-4",children:[L.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase mb-3 px-2",children:[e.jsx($,{size:12}),e.jsx("span",{children:"Recent"})]}),e.jsx("div",{className:"space-y-1",children:L.map((s,t)=>{v++;const r=v,o=r===h;return e.jsxs("div",{ref:p=>y.current[r]=p,onClick:()=>{N(s.id),s.action(),c()},className:`flex items-center gap-3 px-3 py-2.5 rounded-xl cursor-pointer transition-all ${o?"bg-blue-500/20 text-white border border-blue-500/30":"text-gray-300 hover:bg-white/5 border border-transparent"}`,children:[e.jsx("span",{className:"text-gray-400",children:s.icon}),e.jsx("span",{className:"flex-1",children:s.label}),e.jsx("span",{className:"text-[10px] text-gray-600",children:s.category})]},s.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-500 uppercase mb-3 px-2",children:[e.jsx(U,{size:12}),e.jsx("span",{children:"Quick Actions"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Y.map(s=>e.jsxs("button",{onClick:()=>m(s.prefix),className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 transition-all text-left group",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/5 text-gray-400 group-hover:text-white transition-colors",children:s.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2",children:[s.label,e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/10 rounded font-mono text-gray-500",children:s.prefix})]}),e.jsx("div",{className:"text-[10px] text-gray-500",children:s.description})]})]},s.id))})]})]}),!C&&x.length>0&&e.jsx("div",{className:"p-2",children:b?e.jsxs("div",{ref:s=>y.current[0]=s,onClick:()=>{l==null||l(n),c()},className:"flex items-center gap-3 px-4 py-3 rounded-xl cursor-pointer bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 text-white mx-2",children:[e.jsx("span",{className:"p-2 rounded-lg bg-yellow-500/20",children:e.jsx(I,{size:16,className:"text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Ask AI Oracle"}),e.jsxs("div",{className:"text-xs text-gray-400",children:['"',n,'"']})]}),e.jsx(H,{size:16,className:"ml-auto text-yellow-400"})]}):Object.entries(A).map(([s,t])=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-600 uppercase px-3 py-2 tracking-wider",children:[O[s]||e.jsx(M,{size:12}),e.jsx("span",{children:s}),e.jsxs("span",{className:"ml-1 text-gray-700",children:["(",t.length,")"]})]}),t.map(r=>{v++;const o=v,p=o===h;return e.jsxs("div",{ref:T=>y.current[o]=T,onClick:()=>{N(r.id),r.action(),c()},className:`flex items-center gap-3 px-3 py-2.5 mx-1 rounded-xl cursor-pointer transition-all ${p?"bg-blue-500/20 text-white border border-blue-500/30 shadow-lg shadow-blue-500/10":"text-gray-300 hover:bg-white/5 border border-transparent"}`,children:[e.jsx("span",{className:`p-1.5 rounded-lg ${p?"bg-blue-500/20 text-blue-400":"bg-white/5 text-gray-500"}`,children:r.icon}),e.jsx("span",{className:"flex-1 font-medium",children:r.label}),r.shortcut&&e.jsx("span",{className:"text-[10px] px-2 py-1 bg-white/10 rounded-md font-mono text-gray-500",children:r.shortcut}),p&&!r.shortcut&&e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-gray-500",children:[e.jsx(E,{size:10})," to run"]})]},r.id)})]},s))}),!C&&x.length===0&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/5 flex items-center justify-center",children:e.jsx(J,{size:24,className:"text-gray-600"})}),e.jsx("p",{className:"text-gray-400 font-medium mb-1",children:"No commands found"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Try a different search term or use a prefix like ",e.jsx("code",{className:"px-1 bg-white/10 rounded",children:">"})," ",e.jsx("code",{className:"px-1 bg-white/10 rounded",children:"@"})," ",e.jsx("code",{className:"px-1 bg-white/10 rounded",children:"#"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-white/10 bg-[#0d1117] text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded font-mono",children:e.jsx(K,{size:10})}),e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded font-mono",children:e.jsx(Q,{size:10})}),e.jsx("span",{children:"Navigate"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded font-mono",children:e.jsx(E,{size:10})}),e.jsx("span",{children:"Select"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded font-mono text-[9px]",children:"Tab"}),e.jsx("span",{children:"Switch Mode"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 rounded font-mono text-[9px]",children:"Esc"}),e.jsx("span",{children:"Close"})]})]})]})})};export{se as default};
