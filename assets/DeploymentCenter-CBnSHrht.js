import{v as s,j as e,Q as q,X as O,ah as $,au as _,az as B,aP as W,T as L}from"./vendor-react-tt7m-l12.js";import{a as J}from"./index.dev-B1QYoz0d.js";import"./vendor-mcp-DCT6vnr2.js";import"./vendor-misc-euQLCzIo.js";import"./vendor-network-aHtHbEbM.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const f=[{id:"azure-webapp-free",name:"Azure App Service",tier:"Free F1",provider:"Azure",description:"Node.js/Python web apps with free SSL",command:i=>`az webapp up --name ${i} --sku F1 --runtime "NODE:20-lts"`,icon:"ðŸ”·",color:"text-blue-400",bg:"bg-blue-500/10"},{id:"azure-swa",name:"Azure Static Web Apps",tier:"Free",provider:"Azure",description:"Static sites + serverless APIs",command:i=>`az staticwebapp create --name ${i} --resource-group sai-deployments`,icon:"âš¡",color:"text-cyan-400",bg:"bg-cyan-500/10"},{id:"azure-functions",name:"Azure Functions",tier:"Consumption",provider:"Azure",description:"Serverless functions (1M free requests/mo)",command:i=>`func azure functionapp publish ${i}`,icon:"Î»",color:"text-yellow-400",bg:"bg-yellow-500/10"},{id:"netlify",name:"Netlify",tier:"Free",provider:"Netlify",description:"Static sites with CI/CD",command:()=>"npx netlify-cli deploy --prod",icon:"â—†",color:"text-teal-400",bg:"bg-teal-500/10"},{id:"vercel",name:"Vercel",tier:"Hobby",provider:"Vercel",description:"Next.js & static sites",command:()=>"npx vercel --prod",icon:"â–²",color:"text-white",bg:"bg-white/10"},{id:"gcp-cloudrun",name:"GCP Cloud Run",tier:"Free Tier",provider:"GCP",description:"Containerized apps (2M free requests/mo)",command:i=>`gcloud run deploy ${i} --source . --allow-unauthenticated`,icon:"â˜ï¸",color:"text-red-400",bg:"bg-red-500/10"},{id:"firebase",name:"Firebase Hosting",tier:"Spark (Free)",provider:"Firebase",description:"Static + dynamic hosting",command:()=>"firebase deploy --only hosting",icon:"ðŸ”¥",color:"text-orange-400",bg:"bg-orange-500/10"},{id:"github-pages",name:"GitHub Pages",tier:"Free",provider:"GitHub",description:"Static sites from repo",command:()=>"npx gh-pages -d dist",icon:"ðŸ™",color:"text-purple-400",bg:"bg-purple-500/10"}],se=({onClose:i,fileStructure:m,onRunInTerminal:y,activeModelId:P})=>{const[c,R]=s.useState(()=>(m.name||"sai-app").toLowerCase().replace(/[^a-z0-9-]/g,"-").slice(0,32)),[a,j]=s.useState(f[0]),[v,U]=s.useState(["[system] Deployment Center ready. Select a target and deploy."]),[x,N]=s.useState(!1),[E,w]=s.useState(null),[G,I]=s.useState(!1),[C,k]=s.useState(null),[z,S]=s.useState(!1),[d,A]=s.useState(""),[p,u]=s.useState(!1),F=s.useRef(null);s.useEffect(()=>{var t;(t=F.current)==null||t.scrollIntoView({behavior:"smooth"})},[v]);const o=(t,r="info")=>{const n={info:"text-gray-400",success:"text-emerald-400",error:"text-red-400",cmd:"text-cyan-400"},l=new Date().toLocaleTimeString("en-US",{hour12:!1});U(b=>[...b,`<span class="text-gray-600">[${l}]</span> <span class="${n[r]}">${t}</span>`])},D=(t,r=0)=>{let n="  ".repeat(r)+(t.type==="folder"?"ðŸ“ ":"ðŸ“„ ")+t.name+`
`;return t.children&&t.children.forEach(l=>n+=D(l,r+1)),n},h=s.useMemo(()=>D(m),[m]),g=s.useMemo(()=>{const t=h.toLowerCase();return t.includes("next.config")?"Next.js":t.includes("vite.config")?"Vite":t.includes("angular.json")?"Angular":t.includes("package.json")&&t.includes("index.html")?"Static + Node":t.includes("requirements.txt")||t.includes(".py")?"Python":t.includes("dockerfile")?"Docker":t.includes("package.json")?"Node.js":"Unknown"},[h]),M=async()=>{S(!0),k(null),o("Analyzing project structure with AI...","info");try{const t=`Analyze this project and suggest the best FREE deployment option.

Project files:
${h}

Available free targets:
- Azure App Service Free F1 (Node.js/Python web apps)
- Azure Static Web Apps (static + serverless)
- Azure Functions Consumption (serverless)
- Netlify (static sites)
- Vercel (Next.js, static)
- GCP Cloud Run (containers, 2M free req/mo)
- Firebase Hosting (static + dynamic)
- GitHub Pages (static only)

Return a JSON object with:
{
  "recommendedTarget": "target id",
  "reason": "brief explanation",
  "preDeployCommands": ["npm run build", etc],
  "deployCommand": "the actual deploy command",
  "estimatedCost": "$0/month for X requests"
}`,r=await J.chat(t,P),n=JSON.parse(r.replace(/```json\n?|\n?```/g,"").trim());k(JSON.stringify(n,null,2)),o(`AI recommends: ${n.recommendedTarget} - ${n.reason}`,"success");const l=f.find(b=>b.id===n.recommendedTarget);l&&j(l),n.deployCommand&&A(n.deployCommand)}catch{o("Failed to analyze project. Using default settings.","error")}finally{S(!1),I(!0)}},H=async()=>{N(!0),w(null);const t=p&&d?d:a.command(c);o(`Deploying to ${a.name} (${a.tier})...`,"info"),o(`$ ${t}`,"cmd"),y(t),o("Command sent to terminal. Watch terminal for deployment progress.","info"),o("The actual deployment URL will appear in the terminal output.","info"),setTimeout(()=>{w("pending"),o("âœ“ Deploy command executed. Check terminal for results and URL.","success"),N(!1)},1500)},V=()=>{const t=p&&d?d:a.command(c);navigator.clipboard.writeText(t),o("Command copied to clipboard","success")},T=()=>{const t=[];return(g==="Next.js"||g==="Vite")&&t.push("npm run build"),a.provider==="Azure"&&a.id!=="azure-webapp-free"&&t.push("az login"),a.id==="netlify"&&t.push("npm install -g netlify-cli"),a.id==="vercel"&&t.push("npm install -g vercel"),a.id==="firebase"&&(t.push("npm install -g firebase-tools"),t.push("firebase login")),t};return e.jsxs("div",{className:"flex flex-col h-full bg-[#0b0e14] text-[var(--color-text-primary)]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5 bg-[#0f111a]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-xl text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.2)]",children:e.jsx(q,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-[0.2em] text-white",children:"Deploy Center"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Free-Tier Cloud Deployment"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-1 rounded-full bg-emerald-500/10 text-emerald-400 border border-emerald-500/20",children:g}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-white/5 rounded-full text-gray-500 hover:text-white transition-all",children:e.jsx(O,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Deployment Name"}),e.jsx("input",{type:"text",value:c,onChange:t=>R(t.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")),className:"w-full bg-[#131b2c] border border-white/5 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-emerald-500/50",placeholder:"my-app-name"})]}),e.jsx("button",{onClick:M,disabled:z,className:"w-full py-3 rounded-xl bg-gradient-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/20 text-purple-300 font-bold text-xs uppercase tracking-wider flex items-center justify-center gap-2 hover:from-purple-600/30 hover:to-pink-600/30 transition-all disabled:opacity-50",children:z?e.jsxs(e.Fragment,{children:[e.jsx($,{size:14,className:"animate-spin"})," Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{size:14})," AI: Recommend Best Free Deployment"]})}),G&&C&&e.jsxs("div",{className:"bg-purple-500/5 border border-purple-500/20 rounded-xl p-4",children:[e.jsx("div",{className:"text-[9px] font-black text-purple-400 uppercase tracking-widest mb-2",children:"AI Recommendation"}),e.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto",children:C})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Select Target (All Free Tier)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:f.map(t=>e.jsxs("button",{onClick:()=>{j(t),u(!1)},className:`p-3 rounded-xl border text-left transition-all ${a.id===t.id?`${t.bg} border-white/20 ring-1 ring-white/10`:"bg-white/[0.02] border-white/5 hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:`text-xs font-bold ${t.color}`,children:t.name})]}),e.jsx("div",{className:"text-[9px] text-gray-500 font-medium",children:t.tier}),e.jsx("div",{className:"text-[8px] text-gray-600 mt-1",children:t.description})]},t.id))})]}),T().length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Pre-Deploy Setup"}),e.jsx("div",{className:"bg-[#131b2c] rounded-xl p-3 space-y-1",children:T().map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono",children:[e.jsxs("span",{className:"text-gray-600",children:[r+1,"."]}),e.jsx("code",{className:"text-cyan-400",children:t}),e.jsx("button",{onClick:()=>y(t),className:"ml-auto text-[8px] uppercase font-bold text-gray-500 hover:text-cyan-400 px-2 py-0.5 rounded bg-white/5",children:"Run"})]},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Deploy Command"}),e.jsxs("label",{className:"flex items-center gap-2 text-[9px] text-gray-500",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:t=>u(t.target.checked),className:"rounded"}),"Custom command"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:p?d:a.command(c),onChange:t=>{A(t.target.value),u(!0)},className:"flex-1 bg-[#131b2c] border border-white/5 rounded-xl px-4 py-3 text-sm text-cyan-400 font-mono focus:outline-none focus:border-emerald-500/50",readOnly:!p}),e.jsx("button",{onClick:V,className:"px-4 rounded-xl bg-white/5 hover:bg-white/10 text-gray-400 transition-all",title:"Copy command",children:e.jsx(B,{size:16})})]})]}),e.jsx("button",{onClick:H,disabled:x||!c,className:`w-full py-4 rounded-xl font-black text-sm uppercase tracking-[0.15em] text-white shadow-xl transition-all flex items-center justify-center gap-3 active:scale-[0.98] disabled:opacity-30 ${x?"bg-gray-700":"bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 shadow-emerald-900/30"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx($,{size:16,className:"animate-spin"})," Deploying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:16})," Deploy to ",a.name]})}),E&&e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-xl p-4 animate-fade-in",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-lg text-cyan-400",children:e.jsx(L,{size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[9px] font-black text-cyan-400 uppercase tracking-widest mb-1",children:"Deployment Command Sent"}),e.jsx("p",{className:"text-sm font-bold text-white",children:"Check the terminal below for your deployment URL"}),e.jsxs("div",{className:"mt-2 p-2 bg-black/30 rounded-lg",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-mono",children:"Look for output like:"}),e.jsx("p",{className:"text-[10px] text-emerald-400 font-mono mt-1",children:"âœ“ Service URL: https://your-app.azurewebsites.net"}),e.jsx("p",{className:"text-[10px] text-emerald-400 font-mono",children:"âœ“ Live at: https://your-app.netlify.app"})]})]})]})}),e.jsxs("div",{className:"bg-[#0d1117] border border-white/5 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-[#161b22] px-4 py-2 border-b border-white/5 flex items-center gap-2 text-[9px] font-black uppercase text-gray-500 tracking-widest",children:[e.jsx(L,{size:12,className:"text-cyan-400"}),e.jsx("span",{children:"Activity Log"})]}),e.jsxs("div",{className:"p-4 font-mono text-[11px] max-h-[200px] overflow-y-auto custom-scrollbar leading-relaxed",children:[v.map((t,r)=>e.jsx("div",{className:"mb-1",dangerouslySetInnerHTML:{__html:t}},r)),e.jsx("div",{ref:F})]})]}),e.jsxs("div",{className:"text-[9px] text-gray-600 space-y-1",children:[e.jsx("div",{className:"font-bold uppercase tracking-widest text-gray-500 mb-2",children:"Free Tier Limits (typical)"}),e.jsx("div",{children:"â€¢ Azure App Service F1: 60 min CPU/day, 1GB storage"}),e.jsx("div",{children:"â€¢ Azure Functions: 1M executions/month free"}),e.jsx("div",{children:"â€¢ Netlify/Vercel: 100GB bandwidth/month"}),e.jsx("div",{children:"â€¢ GCP Cloud Run: 2M requests/month free"}),e.jsx("div",{children:"â€¢ Firebase: 10GB/month hosting bandwidth"})]})]})]})};export{se as default};
