import{v as a,j as r,a3 as N,aP as k}from"./vendor-react-tt7m-l12.js";import{i as E}from"./index.dev-vR_ZKarG.js";import"./vendor-mcp-CN8JrFe1.js";import"./vendor-misc-sHEHZw9n.js";import"./vendor-network-DBeEYzJJ.js";import"./vendor-terminal-D4sCRDlA.js";import"./vendor-ai-BVRLdj29.js";const S=({isOpen:l,onClose:o,onSelect:x,onUpload:u})=>{const[i,m]=a.useState(""),[c,d]=a.useState(0),h=a.useRef(null),p=a.useRef(null),b=a.useRef(null),g=a.useRef([]),n=a.useMemo(()=>E.filter(e=>e.label.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase())||e.extension.toLowerCase().includes(i.toLowerCase())),[i]);a.useEffect(()=>{l&&(m(""),d(0),setTimeout(()=>{var e;return(e=h.current)==null?void 0:e.focus()},100))},[l]),a.useEffect(()=>{const e=t=>{if(l)if(t.key==="ArrowDown")t.preventDefault(),d(s=>(s+1)%n.length);else if(t.key==="ArrowUp")t.preventDefault(),d(s=>(s-1+n.length)%n.length);else if(t.key==="Enter"){t.preventDefault();const s=n[c];s&&(x(s.extension,s.filename),o())}else t.key==="Escape"&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,n,c,o,x]),a.useEffect(()=>{var e;(e=g.current[c])==null||e.scrollIntoView({block:"nearest"})},[c]);const w=e=>{var f;const t=(f=e.target.files)==null?void 0:f[0];if(!t)return;const s=new FileReader;s.onload=j=>{var v;const y=(v=j.target)==null?void 0:v.result;u&&(u(t.name,y),o())},s.readAsText(t),e.target.value=""};return l?r.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex justify-center pt-20",onClick:o,children:r.jsxs("div",{className:"bg-[#1e2227] w-full max-w-xl rounded-lg shadow-2xl border border-[var(--color-border)] flex flex-col max-h-[60vh] animate-fade-in",onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center p-3 border-b border-[var(--color-border)] flex-shrink-0",children:[r.jsx(N,{className:"w-5 h-5 text-gray-500 mr-3"}),r.jsx("input",{ref:h,type:"text",value:i,onChange:e=>{m(e.target.value),d(0)},placeholder:"Select file type or search...",className:"w-full bg-transparent text-white placeholder-gray-500 focus:outline-none text-lg"})]}),r.jsx("div",{ref:b,className:"flex-1 overflow-y-auto p-2",children:n.length>0?n.map((e,t)=>{const s=t===c;return r.jsxs("div",{ref:f=>g.current[t]=f,onClick:()=>{x(e.extension,e.filename),o()},className:`flex items-center justify-between px-4 py-3 rounded-md cursor-pointer text-sm transition-colors ${s?"bg-[var(--color-accent)]/20":"hover:bg-white/5"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-gray-400",children:e.icon}),r.jsx("span",{className:`font-medium ${s?"text-white":"text-gray-300"}`,children:e.label})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:e.description}),e.extension&&r.jsxs("span",{className:"text-xs font-mono text-gray-600 bg-black/20 px-1.5 py-0.5 rounded",children:[".",e.extension]})]})]},t)}):r.jsx("div",{className:"text-center p-8 text-gray-500",children:"No file types found."})}),u&&r.jsxs("div",{className:"p-2 border-t border-[var(--color-border)] bg-[#161b22]",children:[r.jsx("input",{type:"file",ref:p,onChange:w,className:"hidden"}),r.jsxs("button",{onClick:()=>{var e;return(e=p.current)==null?void 0:e.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-2 rounded-md bg-[var(--color-background-tertiary)] hover:bg-[var(--color-background-hover)] text-sm text-gray-300 hover:text-white transition-colors border border-[var(--color-border)] border-dashed",children:[r.jsx(k,{size:16}),r.jsx("span",{children:"Upload File from Computer"})]})]})]})}):null};export{S as default};
