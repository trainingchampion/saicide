import{v as l,j as e,A as E,bq as D,bT as A,aO as T,aF as S,b5 as R,cG as L,bf as O}from"./vendor-react-tt7m-l12.js";const M=({isOpen:m,onClose:h,onInviteSent:x})=>{const[b,y]=l.useState(""),[f,j]=l.useState(!1),[s,k]=l.useState(""),[t,n]=l.useState("idle"),[v,c]=l.useState("");l.useEffect(()=>{m&&!s&&k(`https://sai.sh/project/${Math.random().toString(36).substring(7)}`),m&&(n("idle"),c(""))},[m,s]);const w=()=>{if(!b.trim()){c("Please enter an email address."),n("error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.trim())){c("Please enter a valid email address."),n("error");return}n("sending"),c("");const a=encodeURIComponent("You're invited to collaborate on SAI"),i=encodeURIComponent(`Hi there!

You've been invited to join a collaborative coding session on SAI - the AI-powered Cloud IDE.

Click the link below to join the project:
${s}

Looking forward to collaborating with you!

---
Sent via SAI Cloud IDE
https://sai.sh`),o=`mailto:${b.trim()}?subject=${a}&body=${i}`;window.open(o,"_blank"),setTimeout(()=>{n("success"),navigator.clipboard.writeText(s).catch(()=>{}),x&&x(),setTimeout(()=>{y(""),n("idle"),h()},1500)},500)},I=()=>{navigator.clipboard.writeText(s),j(!0),setTimeout(()=>j(!1),2e3),x&&x()},N=r=>{const a=encodeURIComponent("SAI Collaboration Session"),i=encodeURIComponent(`Join me for a live coding session on SAI.

Project Link: ${s}`),o=encodeURIComponent(s),d=new Date,u=new Date(d.getTime()+60*60*1e3),p=`${d.toISOString().replace(/[-:]/g,"").split(".")[0]}Z/${u.toISOString().replace(/[-:]/g,"").split(".")[0]}Z`;switch(r){case"google":return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${a}&details=${i}&location=${o}&dates=${p}`;case"outlook":return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${a}&body=${i}&location=${o}&startdt=${d.toISOString()}&enddt=${u.toISOString()}`;case"yahoo":return`https://calendar.yahoo.com/?v=60&view=d&type=20&title=${a}&desc=${i}&in_loc=${o}&st=${p}`;default:return"#"}},C=()=>{const r="SAI Collaboration Session",a=`Join me for a live coding session on SAI.

Project Link: ${s}`,i=s,o=new Date,d=new Date(o.getTime()+60*60*1e3),u=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//SAI//Cloud IDE//EN
BEGIN:VEVENT
UID:${Date.now()}@sai.sh
DTSTAMP:${o.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
DTSTART:${o.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
DTEND:${d.toISOString().replace(/[-:]/g,"").split(".")[0]}Z
SUMMARY:${r}
DESCRIPTION:${a}
LOCATION:${i}
END:VEVENT
END:VCALENDAR`,p=new Blob([u],{type:"text/calendar;charset=utf-8"}),$=URL.createObjectURL(p),g=document.createElement("a");g.href=$,g.setAttribute("download","sai-session.ics"),document.body.appendChild(g),g.click(),document.body.removeChild(g)};return m?e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",onClick:h,children:e.jsxs("div",{className:"bg-[#131b2c] rounded-2xl p-8 w-full max-w-md text-white border border-gray-700 shadow-xl",onClick:r=>r.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Share Project & Invite"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300 block mb-2",children:"Share Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:s||"Generating link...",className:"flex-1 bg-gray-900/50 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-400"}),e.jsxs("button",{onClick:I,className:`px-3 py-2 rounded-lg font-semibold text-sm flex items-center gap-2 transition-colors ${f?"bg-green-600/50 text-green-300":"bg-gray-700 hover:bg-gray-600"}`,children:[f?e.jsx(E,{size:16}):e.jsx(D,{size:16}),f?"Copied":"Copy"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300 block mb-2 flex items-center gap-2",children:[e.jsx(A,{size:14})," Add to Calendar"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("a",{href:N("google"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700",children:"Google"}),e.jsx("a",{href:N("outlook"),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700",children:"Outlook"}),e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white px-3 py-2 rounded-lg text-xs font-medium transition-colors border border-gray-700 col-span-2",children:[e.jsx(T,{size:12})," Download .ics"]})]})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("hr",{className:"flex-1 border-gray-700"}),e.jsx("span",{className:"px-4 text-xs text-gray-500",children:"OR"}),e.jsx("hr",{className:"flex-1 border-gray-700"})]}),e.jsx("label",{className:"text-sm font-medium text-gray-300 block mb-2",children:"Invite by Email"}),t==="success"&&e.jsxs("div",{className:"mb-3 p-3 bg-green-500/20 border border-green-500/50 rounded-lg flex items-center gap-2 text-green-400 text-sm",children:[e.jsx(S,{size:16}),e.jsx("span",{children:"Invitation sent! Your email client should open with the invite."})]}),t==="error"&&v&&e.jsxs("div",{className:"mb-3 p-3 bg-red-500/20 border border-red-500/50 rounded-lg flex items-center gap-2 text-red-400 text-sm",children:[e.jsx(R,{size:16}),e.jsx("span",{children:v})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(L,{className:"absolute left-3 top-2.5 text-gray-500 w-4 h-4"}),e.jsx("input",{type:"email",value:b,onChange:r=>{y(r.target.value),t==="error"&&(n("idle"),c(""))},onKeyDown:r=>r.key==="Enter"&&w(),placeholder:"teammate@example.com",disabled:t==="sending"||t==="success",className:`w-full bg-gray-900/50 border rounded-lg pl-9 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${t==="error"?"border-red-500":"border-gray-700"} ${t==="sending"||t==="success"?"opacity-50 cursor-not-allowed":""}`})]}),e.jsx("button",{onClick:w,disabled:t==="sending"||t==="success",className:`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap flex items-center gap-2 transition-all ${t==="sending"?"bg-blue-600 opacity-75 cursor-wait":t==="success"?"bg-green-500 cursor-default":"bg-blue-500 hover:bg-blue-600 active:scale-95"}`,children:t==="sending"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):t==="success"?e.jsxs(e.Fragment,{children:[e.jsx(S,{size:16}),"Sent!"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:14}),"Send Invite"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This will open your email client with a pre-filled invitation. The project link has also been copied to your clipboard."}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:h,className:"px-4 py-2 rounded-lg text-gray-400 hover:text-white text-sm",children:"Close"})})]})}):null};export{M as default};
